<!DOCTYPE html>
<html lang="vi" spellcheck="false">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta name="theme-color" content="#ffffff" />
        <meta name="mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <!-- Content Security Policy -->
        <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:; style-src * 'unsafe-inline' https://cdn.jsdelivr.net; script-src * 'unsafe-inline' 'unsafe-eval' https://code.jquery.com; connect-src * 'unsafe-inline'; img-src * data: blob: 'unsafe-inline'; frame-src *; font-src * data: 'unsafe-inline';" />

        <title>Admin Dashboard - Quản trị hệ thống</title>
        
        <link rel="stylesheet" href="css/libs/bootstrap.min.css">
        <link rel="stylesheet" href="css/libs/bootstrap-icons.min.css">
        <link rel="stylesheet" href="css/libs/font-awesome.min.css">
        <link rel="stylesheet" href="css/libs/roboto.css">
        <link rel="stylesheet" href="dashboard_admin.css">
       
        <script src="js/libs/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="js/libs/jquery-3.7.1.min.js"></script>
        
        <!-- Configuration -->
        <script src="js/config.js"></script>
        
        <!-- Main Dashboard Scripts -->
        <script type="module">
            import { CommonUtils, AuthUtils, PermissionUtils, NotificationUtils, UIUtils } from './js/modules/utils.js';
            import { APIUtils } from './js/modules/api.js';
            import { Dashboard } from './js/modules/dashboard.js';
            import { APITest } from './js/modules/test.js';

            // Khởi tạo dashboard
            const dashboard = new Dashboard();

            // Khởi tạo theo dõi phiên đăng nhập
            AuthUtils.initSessionMonitoring();

            // Chạy kiểm tra hệ thống
            APITest.runAllTests();

            // Xử lý sự kiện khi trang được tải
            document.addEventListener('DOMContentLoaded', () => {
                // Kiểm tra xác thực
                if (!AuthUtils.isAuthenticated()) {
                    window.location.href = '/login_new.html';
                    return;
                }

                // Khởi tạo dashboard
                dashboard.loadData();
            });

            // Xử lý sự kiện khi trang bị đóng
            window.addEventListener('beforeunload', () => {
                dashboard.cleanup();
            });
        </script>
    </head>
    <body>
        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>

        <!-- Notification Container -->
        <div id="notificationContainer" class="notification-container"></div>

        <!-- Rest of your HTML content -->
        <button class="menu-toggle" id="menuToggle">
            <i class="fas fa-bars"></i>
        </button>
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <div class="dashboard-container">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <img src="male.png" alt="User Avatar" class="user-avatar" />
                    <h2 style="color: #3498db;">VNPT</h2>
                </div>

                <!-- Menu Search -->
                <div class="menu-search">
                    <input type="text" placeholder="Tìm kiếm menu..." />
                </div>

                <nav>
                    <ul class="nav-menu">
                        <li class="nav-item" data-menu-id="dashboard">
                            <a href="dashboard.html" class="nav-link active">
                                <span>Dashboard</span>
                            </a>
                        </li>
                        <li class="nav-item has-submenu" data-menu-id="employees">
                            <a href="#" class="nav-link">
                                <span>Nhân viên</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="employees/list.html" class="nav-link">
                                        <span>Danh sách nhân viên</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="employees/add.html" class="nav-link">
                                        <span>Thêm nhân viên</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="employees/contracts.html" class="nav-link">
                                        <span>Hợp đồng</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="employees/attendance.html" class="nav-link">
                                        <span>Chấm công</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Lương</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="salary/list.html" class="nav-link">
                                        <span>Danh sách lương</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="salary/adjust.html" class="nav-link">
                                        <span>Điều chỉnh lương</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="salary/payslip.html" class="nav-link">
                                        <span>Phiếu lương</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="salary/history.html" class="nav-link">
                                        <span>Lịch sử điều chỉnh</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Nghỉ phép</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="leave/register.html" class="nav-link">
                                        <span>Đăng ký nghỉ phép</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="leave/list.html" class="nav-link">
                                        <span>Danh sách nghỉ phép</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Hiệu suất</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="performance/report.html" class="nav-link">
                                        <span>Báo cáo hiệu suất</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="performance/evaluation.html" class="nav-link">
                                        <span>Đánh giá nhân viên</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Phòng ban</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="departments/list.html" class="nav-link">
                                        <span>Danh sách phòng ban</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="positions/list.html" class="nav-link">
                                        <span>Vị trí công việc</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Tài liệu</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="documents/list.html" class="nav-link">
                                        <span>Danh sách tài liệu</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="documents/upload.html" class="nav-link">
                                        <span>Upload tài liệu</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="documents/manage.html" class="nav-link">
                                        <span>Quản lý tài liệu</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="documents/view_document.html" class="nav-link">
                                        <span>Xem tài liệu</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Thiết bị</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="equipment/list.html" class="nav-link">
                                        <span>Danh sách thiết bị</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="equipment/assign.html" class="nav-link">
                                        <span>Cấp phát thiết bị</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Báo cáo</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="reports/employee.html" class="nav-link">
                                        <span>Đánh giá hiệu suất</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Tuyển dụng</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="recruitment/positions.html" class="nav-link">
                                        <span>Vị trí tuyển dụng</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="recruitment/candidates.html" class="nav-link">
                                        <span>Quản lý ứng viên</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="recruitment/interviews.html" class="nav-link">
                                        <span>Lịch phỏng vấn</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="recruitment/onboarding.html" class="nav-link">
                                        <span>Onboarding</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Phúc lợi</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="benefits/insurance.html" class="nav-link">
                                        <span>Bảo hiểm</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="benefits/policies.html" class="nav-link">
                                        <span>Chính sách phúc lợi</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Dự án</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="projects/list.html" class="nav-link">
                                        <span>Danh sách dự án</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="projects/tasks.html" class="nav-link">
                                        <span>Quản lý công việc</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Cài đặt</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="settings/security.html" class="nav-link">
                                        <span>Bảo mật</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="settings/integrations.html" class="nav-link">
                                        <span>Tích hợp</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="settings/backup.html" class="nav-link">
                                        <span>Sao lưu</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Đào tạo</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="training/courses.html" class="nav-link">
                                        <span>Quản lý khóa đào tạo</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="training/register.html" class="nav-link">
                                        <span>Đăng ký đào tạo</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="training/list.html" class="nav-link">
                                        <span>Danh sách đăng ký</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="training/evaluation.html" class="nav-link">
                                        <span>Đánh giá kết quả</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="training/reports.html" class="nav-link">
                                        <span>Báo cáo đào tạo</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" id="logoutBtn">
                                <span>Đăng xuất</span>
                            </a>
                        </li>
                    </ul>
                </nav>

                <!-- Recent Menu -->
                <div class="recent-menu">
                    <h3>Menu gần đây</h3>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Improved Header -->
                <header class="header">
                    <div class="header-left">
                        <h1 style="color: #F8D800;">Admin Dashboard</h1>
                    </div>
                    <div class="header-right">
                        <div class="header-controls">
                            <div class="search-container" id="searchContainer">
                                <input type="text" id="globalSearch" class="form-control" placeholder="Search..." />
                                <div id="searchResults" class="search-results"></div>
                            </div>
                            <button id="searchToggle" class="btn btn-link">
                                <i class="fas fa-search"></i>
                            </button>
                            <div class="theme-toggle-wrapper">
                                <div class="theme-toggle" id="themeToggle" role="button" tabindex="0">
                                    <div class="sun">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <circle cx="12" cy="12" r="5"/>
                                            <line x1="12" y1="1" x2="12" y2="3"/>
                                            <line x1="12" y1="21" x2="12" y2="23"/>
                                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                                            <line x1="1" y1="12" x2="3" y2="12"/>
                                            <line x1="21" y1="12" x2="23" y2="12"/>
                                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                                        </svg>
                                    </div>
                                    <div class="moon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                    <i class="fas fa-user-circle"></i> Admin
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#">Profile</a></li>
                                    <li><a class="dropdown-item" href="#">Settings</a></li>
                                    <li><a class="dropdown-item" href="#" id="logoutBtn">Logout</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </header>

               

                <!-- Add quick actions panel -->
                <div class="quick-actions-panel">
                    <h3>Quick Actions</h3>
                    <div class="quick-actions-grid">
                        <button class="quick-action-btn" onclick="window.location.href='employees/add.html'">
                            <i class="fas fa-user-plus"></i>
                            <span>Thêm nhân viên</span>
                        </button>
                        <button class="quick-action-btn" onclick="window.location.href='attendance/check.html'">
                            <i class="fas fa-clock"></i>
                            <span>Chấm công</span>
                        </button>
                        <button class="quick-action-btn" onclick="window.location.href='leave/register.html'">
                            <i class="fas fa-calendar-alt"></i>
                            <span>Đăng ký nghỉ phép</span>
                        </button>
                        <button class="quick-action-btn" onclick="window.location.href='salary/calculate.html'">
                            <i class="fas fa-calculator"></i>
                            <span>Tính lương</span>
                        </button>
                    </div>
                </div>

                <!-- Priority Metrics Grid -->
                <section class="metrics-grid">
                    <div class="row g-3">
                        <!-- Priority 1 Metrics -->
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-1 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" id="totalEmployees">
                                        0
                                    </div>
                                    <div class="stat-label">Tổng nhân viên</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-1 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-bullseye"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" id="kpiCompletion">
                                        0%
                                    </div>
                                    <div class="stat-label">Hoàn thành KPI</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-1 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-user-plus"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" id="newCandidates">
                                        0
                                    </div>
                                    <div class="stat-label">Ứng viên mới</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-1 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-project-diagram"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" id="activeProjects">
                                        0
                                    </div>
                                    <div class="stat-label">
                                        Dự án đang chạy
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-1 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-user-check"></i>
                                </div>
                                <div class="stat-content">
                                    <div
                                        class="stat-value"
                                        id="activeEmployees"
                                    >
                                        0
                                    </div>
                                    <div class="stat-label">
                                        Nhân viên đang hoạt động
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-1 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="stat-content">
                                    <div
                                        class="stat-value"
                                        id="todayAttendance"
                                    >
                                        0%
                                    </div>
                                    <div class="stat-label">
                                        Tỷ lệ chấm công hôm nay
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Priority 2 Metrics -->
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-2 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" id="pendingLeaves">
                                        0
                                    </div>
                                    <div class="stat-label">
                                        Đơn xin nghỉ phép chờ duyệt
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-2 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-money-bill-wave"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" id="totalSalary">
                                        0
                                    </div>
                                    <div class="stat-label">
                                        Tổng quỹ lương tháng
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-2 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-user-times"></i>
                                </div>
                                <div class="stat-content">
                                    <div
                                        class="stat-value"
                                        id="inactiveEmployees"
                                    >
                                        0
                                    </div>
                                    <div class="stat-label">
                                        Nhân viên không hoạt động
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Add notification center -->
                <div class="notification-center">
                    <div class="notification-header">
                        <h3>Thông báo</h3>
                        <button class="btn btn-sm btn-primary" onclick="markAllAsRead()">Đánh dấu đã đọc</button>
                    </div>
                    <div class="notification-list" id="notificationList">
                        <!-- Notifications will be loaded dynamically -->
                    </div>
                </div>

                <!-- Add calendar widget -->
                <div class="calendar-widget">
                    <div class="calendar-header">
                        <h3>Lịch làm việc</h3>
                        <div class="calendar-controls">
                            <button class="btn btn-sm" onclick="prevMonth()"><i class="fas fa-chevron-left"></i></button>
                            <span id="currentMonth">Tháng 1, 2024</span>
                            <button class="btn btn-sm" onclick="nextMonth()"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                    <div class="calendar-body" id="calendarBody">
                        <!-- Calendar will be loaded dynamically -->
                    </div>
                </div>

                <!-- Add task list widget -->
                <div class="task-list-widget">
                    <div class="task-list-header">
                        <h3>Công việc</h3>
                        <button class="btn btn-sm btn-primary" onclick="addTask()">Thêm công việc</button>
                    </div>
                    <div class="task-list" id="taskList">
                        <!-- Tasks will be loaded dynamically -->
                    </div>
                </div>

                <!-- Add weather widget -->
                <div class="weather-widget">
                    <div class="weather-header">
                        <h3>Thời tiết</h3>
                        <div class="weather-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span id="weatherLocation">Hà Nội</span>
                        </div>
                    </div>
                    <div class="weather-content" id="weatherContent">
                        <!-- Weather data will be loaded dynamically -->
                    </div>
                </div>

                <!-- Add chat widget -->
                <div class="chat-widget">
                    <div class="chat-header">
                        <h3>Team Chat</h3>
                        <button class="btn btn-sm btn-primary" onclick="newChat()">Cuộc trò chuyện mới</button>
                    </div>
                    <div class="chat-list" id="chatList">
                        <!-- Chat list will be loaded dynamically -->
                    </div>
                </div>

                <!-- Add backup widget -->
                <div class="backup-widget">
                    <div class="backup-header">
                        <h3>Sao lưu dữ liệu</h3>
                        <button class="btn btn-sm btn-primary" onclick="backupData()">Sao lưu ngay</button>
                    </div>
                    <div class="backup-info">
                        <p>Lần sao lưu cuối: <span id="lastBackup">Chưa có</span></p>
                        <p>Kích thước: <span id="backupSize">0 MB</span></p>
                    </div>
                </div>

                <section class="data-tabs">
                    <div class="tab-content" id="recentTabsContent">
                        <div
                            class="tab-pane fade show active"
                            id="employees"
                            role="tabpanel"
                        >
                            <div style="margin-top: 30px;" class="data-section">
                                <div class="section-header">
                                    <h3 class="section-title">Nhân viên mới</h3>
                                    <div class="action-buttons">
                                        <button
                                            class="btn btn-primary"
                                            onclick="window.location.href='./employees/list.html'"
                                        >
                                            Xem tất cả
                                        </button>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="admin-table">
                                        <thead>
                                            <tr>
                                                <th>Mã NV</th>
                                                <th>Họ tên</th>
                                                <th>Chức vụ</th>
                                                <th>Phòng ban</th>
                                                <th>Ngày vào làm</th>
                                                <th>Ngày sinh</th>
                                                <th>SĐT</th>
                                                <th>Email</th>
                                                <th>Địa chỉ</th>
                                                <th>Trạng thái</th>
                                                <th>Thao tác</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recentEmployees">
                                            <!-- Data will be loaded dynamically -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div
                            class="tab-pane fade"
                            id="activities"
                            role="tabpanel"
                        >
                            <div class="data-section">
                                <div class="section-header">
                                    <h3 class="section-title">
                                        Hoạt động gần đây
                                    </h3>
                                    <div class="activity-filter">
                                        <select
                                            id="activityType"
                                            class="form-select"
                                        >
                                            <option value="all">
                                                Tất cả hoạt động
                                            </option>
                                            <option value="login">
                                                Đăng nhập
                                            </option>
                                            <option value="edit">
                                                Chỉnh sửa
                                            </option>
                                            <option value="view">
                                                Xem thông tin
                                            </option>
                                            <option value="delete">Xóa</option>
                                        </select>
                                        <input
                                            type="date"
                                            id="activityDate"
                                            class="form-control"
                                        />
                                        <input
                                            type="text"
                                            class="form-control"
                                            placeholder="Tìm kiếm người dùng..."
                                        />
                                    </div>
                                </div>
                                <div id="recentActivities">
                                    <!-- Data will be loaded dynamically -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- Charts Section -->
                <section class="charts-section">
                    <div class="row g-3">
                        <div class="col-12 col-lg-8">
                            <div class="data-section main-chart h-100">
                                <div class="section-header">
                                    <h3 class="section-title">
                                        Xu hướng chấm công
                                    </h3>
                                    <div class="chart-controls">
                                        <select
                                            class="form-select"
                                            id="attendancePeriod"
                                        >
                                            <option value="week">Tuần</option>
                                            <option value="month">Tháng</option>
                                            <option value="quarter">Quý</option>
                                        </select>
                                        <button
                                            class="btn"
                                            onclick="ExportUtils.exportChart('attendanceChart')"
                                        >
                                            <i class="fas fa-download"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="chart-container">
                                    <canvas id="attendanceChart"></canvas>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 col-lg-4">
                            <div class="data-section h-100">
                                <div class="section-header">
                                    <h3 class="section-title">
                                        Phân bố nhân viên theo phòng ban
                                    </h3>
                                    <div class="chart-controls">
                                        <button
                                            class="btn"
                                            onclick="ExportUtils.exportChart('departmentChart')"
                                        >
                                            <i class="fas fa-download"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="chart-container">
                                    <canvas id="departmentChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Tabs Section -->

                <!-- Collapsible Sections -->
                <section class="additional-sections">
                    <div class="accordion" id="additionalSectionsAccordion">
                        <!-- AI Predictions Section -->
                        <div style="margin-top: 30px;" class="accordion-item">
                            <h2 class="accordion-header" id="aiSectionHeader">
                                <button
                                    class="accordion-button"
                                    type="button"
                                    data-bs-toggle="collapse"
                                    data-bs-target="#aiSection"
                                >
                                    Dự đoán và Phân tích
                                </button>
                            </h2>
                            <div
                                id="aiSection"
                                class="accordion-collapse collapse show"
                            >
                                <div class="accordion-body">
                                    <div class="data-section">
                                        <div class="section-header">
                                            <h3 class="section-title">
                                                Dự đoán và Phân tích
                                            </h3>
                                        </div>
                                        <div style="margin-top: 30px;" class="ai-prediction-card">
                                            <h4>Dự đoán xu hướng nhân sự</h4>
                                            <div id="hrTrends"></div>
                                        </div>
                                        <div style="margin-top: 30px;" class="ai-prediction-card">
                                            <h4>Phân tích tâm lý nhân viên</h4>
                                            <div id="sentimentAnalysis"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Gamification Section -->
                        <div class="accordion-item">
                            <h2
                                class="accordion-header"
                                id="gamificationSectionHeader"
                            >
                                <button
                                    class="accordion-button collapsed"
                                    type="button"
                                    data-bs-toggle="collapse"
                                    data-bs-target="#gamificationSection"
                                >
                                    Gamification
                                </button>
                            </h2>
                            <div
                                id="gamificationSection"
                                class="accordion-collapse collapse"
                            >
                                <div class="accordion-body">
                                    <div class="data-section">
                                        <div class="section-header">
                                            <h3 class="section-title">
                                                Gamification
                                            </h3>
                                        </div>
                                        <div class="leaderboard">
                                            <h4>Bảng xếp hạng</h4>
                                            <div id="employeeRankings"></div>
                                        </div>
                                        <div class="achievements">
                                            <h4>Thành tích</h4>
                                            <div
                                                id="employeeAchievements"
                                            ></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Thêm section mới cho AI & Analytics -->
                <section class="ai-analytics-section">
                    <div class="row">
                        <div class="col-lg-6 mb-4">
                            <div class="data-section">
                                <div style="margin-top: 20px;" class="section-header">
                                    <h3 class="section-title">
                                        Dự đoán xu hướng nhân sự
                                    </h3>
                                </div>
                                <div style="margin-top: 20px;" class="ai-prediction-card">
                                    <div class="prediction-chart">
                                        <canvas id="hrTrendsChart"></canvas>
                                    </div>
                                    <div class="prediction-insights">
                                        <h4>Phân tích</h4>
                                        <ul id="hrTrendsInsights"></ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 mb-4">
                            <div class="data-section">
                                <div class="section-header">
                                    <h3 class="section-title">
                                        Phân tích tâm lý nhân viên
                                    </h3>
                                </div>
                                <div class="sentiment-analysis-card">
                                    <div class="sentiment-chart">
                                        <canvas id="sentimentChart"></canvas>
                                    </div>
                                    <div class="sentiment-insights">
                                        <h4>Đề xuất</h4>
                                        <ul id="sentimentInsights"></ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Thêm section mới cho Gamification -->
                <section class="gamification-section">
                    <div class="row">
                        <div class="col-lg-8 mb-4">
                            <div class="data-section">
                                <div class="section-header">
                                    <h3 class="section-title">Bảng xếp hạng</h3>
                                </div>
                                <div class="leaderboard">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Hạng</th>
                                                <th>Nhân viên</th>
                                                <th>Điểm</th>
                                                <th>Thành tích</th>
                                            </tr>
                                        </thead>
                                        <tbody id="leaderboardTable">
                                            <!-- Data will be dynamically loaded -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 mb-4">
                            <div class="data-section">
                                <div class="section-header">
                                    <h3 class="section-title">
                                        Thành tích gần đây
                                    </h3>
                                </div>
                                <div id="recentAchievements">
                                    <!-- Data will be dynamically loaded -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Thêm section mới cho Mobile App -->
                <section class="mobile-app-section">
                    <div class="row">
                        <div class="col-12">
                            <div class="data-section">
                                <div class="section-header">
                                    <h3 class="section-title">
                                        Ứng dụng di động
                                    </h3>
                                </div>
                                <div class="mobile-app-stats">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="stat-card">
                                                <i
                                                    class="fas fa-mobile-alt"
                                                ></i>
                                                <h4>Lượt tải</h4>
                                                <p id="appDownloads">0</p>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="stat-card">
                                                <i
                                                    class="fas fa-user-check"
                                                ></i>
                                                <h4>Người dùng hoạt động</h4>
                                                <p id="activeUsers">0</p>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="stat-card">
                                                <i class="fas fa-bell"></i>
                                                <h4>Thông báo đã gửi</h4>
                                                <p id="notificationsSent">0</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <footer class="footer">
                    <p>&copy; 2023 VNPT. All rights reserved.</p>
                </footer>
            </main>
        </div>

        <script>
            // Add functionality for new components
            // Notification center functionality
            function toggleNotificationCenter() {
                document.querySelector('.notification-center').classList.toggle('active');
            }

            function markAllAsRead() {
                // Implementation for marking all notifications as read
            }

            // Calendar functionality
            function prevMonth() {
                // Implementation for previous month
            }

            function nextMonth() {
                // Implementation for next month
            }

            // Add event listeners
            document.addEventListener('DOMContentLoaded', function() {
                // Initialize notification center
                const notificationBtn = document.querySelector('.notification-btn');
                if (notificationBtn) {
                    notificationBtn.addEventListener('click', toggleNotificationCenter);
                }

                // Initialize calendar
                updateCalendar();
            });

            function updateCalendar() {
                // Implementation for updating calendar
            }

            // Task list functionality
            function addTask() {
                // Implementation for adding new task
            }

            function loadTasks() {
                // Implementation for loading tasks
            }

            // Weather widget functionality
            function updateWeather() {
                // Implementation for updating weather data
            }

            // Chat functionality
            function newChat() {
                // Implementation for starting new chat
            }

            function loadChats() {
                // Implementation for loading chats
            }

            // Backup functionality
            function backupData() {
                // Implementation for data backup
            }

            function loadBackupInfo() {
                // Implementation for loading backup information
            }

            // Add event listeners
            document.addEventListener('DOMContentLoaded', function() {
                // Initialize task list
                loadTasks();

                // Initialize weather widget
                updateWeather();

                // Initialize chat
                loadChats();

                // Initialize backup info
                loadBackupInfo();
            });
        </script>
                <script src="js/modules/global-search.js"></script>
                <script src="js/modules/menu-search.js"></script>
                <script src="js/modules/recent-menu.js"></script>
                <script src="js/modules/user-profile.js"></script>
                <script src="js/modules/export-data.js"></script>
                <script src="js/modules/ai-analysis.js"></script>
                <script src="js/modules/gamification.js"></script>
                <script src="js/modules/mobile-stats.js"></script>
                <script src="js/modules/activity-filter.js"></script>
                <script src="js/modules/notification-handler.js"></script>
                <script src="js/modules/loading-overlay.js"></script>
                <script src="js/modules/dark-mode.js"></script>
    </body>

</html>
