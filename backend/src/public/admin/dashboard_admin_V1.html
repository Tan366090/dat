<!DOCTYPE html>
<html lang="vi" spellcheck="false">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Admin Dashboard - Quản trị hệ thống</title>
        
        <!-- External CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet" />
        <link rel="stylesheet" href="css/admin-dashboard.css" />

        <!-- JavaScript -->
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
        />
        <meta name="theme-color" content="#ffffff" />
        <meta name="mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta
            name="apple-mobile-web-app-status-bar-style"
            content="black-translucent"
        />
        <meta
            http-equiv="Content-Security-Policy"
            content="
            default-src 'self' http://localhost:* http://127.0.0.1:*;
            script-src 'self' 'unsafe-inline' 'unsafe-eval' https://code.jquery.com https://cdn.jsdelivr.net https://cdnjs.cloudflare.com;
            style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdn.jsdelivr.net https://cdnjs.cloudflare.com;
            img-src 'self' data: https://unpkg.com;
            font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com;
            connect-src 'self' http://localhost:* http://127.0.0.1:* https://cdn.jsdelivr.net ws://localhost:8080 ws://127.0.0.1:8080;
            worker-src 'self' blob:;
            frame-src 'self';
            object-src 'none';"
        />
        <title>Admin Dashboard - Quản trị hệ thống</title>
        <link rel="stylesheet" href="dashboard_admin.css">
        <script src="js/dashboard.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="/js/dashboard-realtime.js"></script>
        <script src="test-storage.js"></script>
        <link rel="stylesheet" href="/css/dashboard-realtime.css">

        <!-- External CSS -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
        />
        <link rel="stylesheet" href="css/ui_utils.css" />
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="css/admin-dashboard.css" />

        <!-- JavaScript -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
        <script
            type="module"
            src="assets/js/main.js"
        ></script>

        <!-- Main Dashboard Scripts -->
        <script type="module">
            // Common utilities
            const CommonUtils = {
                formatDate: (date) => {
                    return new Date(date).toLocaleDateString("vi-VN");
                },
                formatCurrency: (amount) => {
                    return new Intl.NumberFormat("vi-VN", {
                        style: "currency",
                        currency: "VND",
                    }).format(amount);
                },
            };

            // Authentication utilities
            const AuthUtils = {
                isAuthenticated: () => {
                    return localStorage.getItem("token") !== null;
                },
                logout: () => {
                    localStorage.removeItem("token");
                    window.location.href = "/login_new.html";
                },
            };

            // Permission utilities
            const PermissionUtils = {
                hasPermission: (permission) => {
                    const userPermissions = JSON.parse(
                        localStorage.getItem("permissions") || "[]"
                    );
                    return userPermissions.includes(permission);
                },
            };

            // Notification utilities
            const NotificationUtils = {
                show: (message, type = "info") => {
                    const container = document.getElementById(
                        "notificationContainer"
                    );
                    const notification = document.createElement("div");
                    notification.className = `notification ${type}`;
                    notification.textContent = message;
                    container.appendChild(notification);
                    setTimeout(() => notification.remove(), 5000);
                },
            };

            // UI utilities
            const UIUtils = {
                toggleDarkMode: () => {
                    document.body.classidebarst.toggle("dark-mode");
                    localStorage.setItem(
                        "darkMode",
                        document.body.classList.contains("dark-mode")
                    );
                }
            };

            // API utilities
            const APIUtils = {
                baseUrl: 'http://localhost/qlnhansu_V2/backend/src/public/api',
                maxRetries: 3,
                retryDelay: 1000,
                cache: new Map(),
                cacheTimeout: 5 * 60 * 1000, // 5 minutes

                // Authentication handling
                getAuthHeaders() {
                    const token = localStorage.getItem('token');
                    return {
                        'Authorization': `Bearer ${token}`,
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    };
                },

                // Enhanced error handling
                handleError(error, endpoint) {
                    const errorTypes = {
                        'NetworkError': 'Lỗi kết nối mạng',
                        'SyntaxError': 'Lỗi định dạng dữ liệu',
                        'TypeError': 'Lỗi xử lý dữ liệu',
                        'default': 'Lỗi không xác định'
                    };

                    const errorMessage = errorTypes[error.name] || errorTypes.default;
                    console.error(`Error in ${endpoint}:`, error);
                    NotificationUtils.show(`${errorMessage}: ${error.message}`, 'error');
                },

                // Cache management
                setCache(key, data) {
                    this.cache.set(key, {
                        data,
                        timestamp: Date.now()
                    });
                },

                getCache(key) {
                    const cached = this.cache.get(key);
                    if (cached && Date.now() - cached.timestamp < this.cacheTimeout) {
                        return cached.data;
                    }
                    this.cache.delete(key);
                    return null;
                },

                // Enhanced fetch with retry and error handling
                async fetchWithRetry(endpoint, options = {}, retryCount = 0) {
                    try {
                        const response = await fetch(`${this.baseUrl}/${endpoint}`, {
                            ...options,
                            headers: {
                                ...this.getAuthHeaders(),
                                ...options.headers
                            },
                            credentials: 'include'
                        });

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        const data = await response.json();
                        return data;
                    } catch (error) {
                        if (retryCount < this.maxRetries) {
                            await new Promise(resolve => setTimeout(resolve, this.retryDelay * (retryCount + 1)));
                            return this.fetchWithRetry(endpoint, options, retryCount + 1);
                        }
                        this.handleError(error, endpoint);
                        return null;
                    }
                },

                // GET request with caching
                async get(endpoint, options = {}) {
                    const cacheKey = `GET:${endpoint}:${JSON.stringify(options)}`;
                    const cachedData = this.getCache(cacheKey);
                    if (cachedData) {
                        return cachedData;
                    }

                    const data = await this.fetchWithRetry(endpoint, {
                        method: 'GET',
                        ...options
                    });

                    if (data) {
                        this.setCache(cacheKey, data);
                    }
                    return data;
                },

                // POST request
                async post(endpoint, body, options = {}) {
                    return this.fetchWithRetry(endpoint, {
                        method: 'POST',
                        body: JSON.stringify(body),
                        ...options
                    });
                },

                // PUT request
                async put(endpoint, body, options = {}) {
                    return this.fetchWithRetry(endpoint, {
                        method: 'PUT',
                        body: JSON.stringify(body),
                        ...options
                    });
                },

                // DELETE request
                async delete(endpoint, options = {}) {
                    return this.fetchWithRetry(endpoint, {
                        method: 'DELETE',
                        ...options
                    });
                },

                // PATCH request
                async patch(endpoint, body, options = {}) {
                    return this.fetchWithRetry(endpoint, {
                        method: 'PATCH',
                        body: JSON.stringify(body),
                        ...options
                    });
                },

                // Query builder for GET requests
                buildQuery(params) {
                    const query = new URLSearchParams();
                    Object.entries(params).forEach(([key, value]) => {
                        if (value !== undefined && value !== null) {
                            query.append(key, value);
                        }
                    });
                    return query.toString();
                },

                // Enhanced data fetching with query parameters
                async fetchData(endpoint, params = {}) {
                    const queryString = this.buildQuery(params);
                    const url = queryString ? `${endpoint}?${queryString}` : endpoint;
                    return this.get(url);
                },

                // Clear cache
                clearCache() {
                    this.cache.clear();
                },

                // Clear specific cache
                clearCacheForEndpoint(endpoint) {
                    for (const [key] of this.cache) {
                        if (key.startsWith(`GET:${endpoint}`)) {
                            this.cache.delete(key);
                        }
                    }
                }
            };

            // API Test functionality
            const APITest = {
                async testConnection() {
                    try {
                        const controller = new AbortController();
                        const timeoutId = setTimeout(
                            () => controller.abort(),
                            5000
                        );

                        const response = await fetch(
                            "/qlnhansu_V2/backend/src/public/api/test/connection",
                            {
                                signal: controller.signal,
                            headers: {
                                    "Content-Type": "application/json",
                                },
                            }
                        );
                        clearTimeout(timeoutId);

                        if (!response.ok) {
                            throw new Error(
                                `HTTP error! status: ${response.status}`
                            );
                        }

                        const data = await response.json();
                        return data.success;
                    } catch (error) {
                        console.error("API Test Error:", error);
                        return false;
                    }
                },

                async testDatabase() {
                    try {
                        const response = await fetch(
                            "/qlnhansu_V2/backend/src/public/api/test/database",
                            {
                                headers: {
                                    "Content-Type": "application/json",
                                },
                            }
                        );
                        if (!response.ok)
                            throw new Error("Database test failed");
                        const data = await response.json();
                        return data.success;
                    } catch (error) {
                        console.error("Database Test Error:", error);
                        return false;
                    }
                },

                async testSession() {
                    try {
                        const response = await fetch(
                            "/qlnhansu_V2/backend/src/public/api/test/session",
                            {
                                headers: {
                                    "Content-Type": "application/json",
                                },
                            }
                        );
                        if (!response.ok)
                            throw new Error("Session test failed");
                        const data = await response.json();
                        return data.active;
                    } catch (error) {
                        console.error("Session Test Error:", error);
                        return false;
                    }
                },

                async testFilePermissions() {
                    try {
                        const response = await fetch(
                            "/qlnhansu_V2/backend/src/public/api/test/permissions",
                            {
                                headers: {
                                    "Content-Type": "application/json",
                                },
                            }
                        );
                        if (!response.ok)
                            throw new Error("Permissions test failed");
                        const data = await response.json();
                        return data.writable;
                    } catch (error) {
                        console.error("Permissions Test Error:", error);
                        return false;
                    }
                },

                async testWithRetry(fn, maxRetries = 3) {
                    for (let i = 0; i < maxRetries; i++) {
                        try {
                            return await fn();
                        } catch (error) {
                            if (i === maxRetries - 1) throw error;
                            await new Promise((resolve) =>
                                setTimeout(resolve, 1000 * (i + 1))
                            );
                        }
                    }
                },

                async runAllTests() {
                    try {
                        const results = {
                            connection: await this.testWithRetry(() =>
                                this.testConnection()
                            ),
                            database: await this.testWithRetry(() =>
                                this.testDatabase()
                            ),
                            session: await this.testWithRetry(() =>
                                this.testSession()
                            ),
                            permissions: await this.testWithRetry(() =>
                                this.testFilePermissions()
                            ),
                        };

                        // Display results
                        const container = document.createElement("div");
                        container.className = "php-test";
                        container.innerHTML = `
                            <h2>System Test Results:</h2>
                            <p>API Connection: ${
                                results.connection ? "Success" : "Failed"
                            }</p>
                            <p>Database Connection: ${
                                results.database ? "Success" : "Failed"
                            }</p>
                            <p>Session: ${
                                results.session ? "Active" : "Inactive"
                            }</p>
                            <p>File Permissions: ${
                                results.permissions ? "Writable" : "Read-only"
                            }</p>
                        `;

                        document.body.insertBefore(
                            container,
                            document.body.firstChild
                        );
                    } catch (error) {
                        console.error("Failed to run tests:", error);
                        NotificationUtils.show(
                            "Failed to run system tests",
                            "error"
                        );
                    }
                },
            };

            // Database utilities
            const DatabaseUtils = {
                async fetchEmployees() {
                    try {
                        const data = await APIUtils.fetchData('data.php', {
                            action: 'getData',
                            table: 'employees'
                        });
                        if (!data || !data.success) return [];
                        return data.data;
                    } catch (error) {
                        console.error("Error fetching employees:", error);
                        return [];
                    }
                },

                async fetchDepartments() {
                    try {
                        const data = await APIUtils.fetchData('data.php', {
                            action: 'getData',
                            table: 'departments'
                        });
                        if (!data || !data.success) return [];
                        return data.data;
                    } catch (error) {
                        console.error("Error fetching departments:", error);
                        return [];
                    }
                },

                async fetchPositions() {
                    try {
                        const data = await APIUtils.fetchData('data.php', {
                            action: 'getData',
                            table: 'positions'
                        });
                        if (!data || !data.success) return [];
                        return data.data;
                    } catch (error) {
                        console.error("Error fetching positions:", error);
                        return [];
                    }
                },

                async fetchPerformances() {
                    try {
                        const data = await APIUtils.fetchData('data.php', {
                            action: 'getData',
                            table: 'performances'
                        });
                        if (!data || !data.success) return [];
                        return data.data;
                    } catch (error) {
                        console.error("Error fetching performances:", error);
                        return [];
                    }
                },

                async fetchPayroll() {
                    try {
                        const data = await APIUtils.fetchData('data.php', {
                            action: 'getData',
                            table: 'payroll'
                        });
                        if (!data || !data.success) return [];
                        return data.data;
                    } catch (error) {
                        console.error("Error fetching payroll:", error);
                        return [];
                    }
                },

                async fetchLeaves() {
                    try {
                        const data = await APIUtils.fetchData('data.php', {
                            action: 'getData',
                            table: 'leaves'
                        });
                        if (!data || !data.success) return [];
                        return data.data;
                    } catch (error) {
                        console.error("Error fetching leaves:", error);
                        return [];
                    }
                },

                async fetchTrainings() {
                    try {
                        const data = await APIUtils.fetchData('data.php', {
                            action: 'getData',
                            table: 'trainings'
                        });
                        if (!data || !data.success) return [];
                        return data.data;
                    } catch (error) {
                        console.error("Error fetching trainings:", error);
                        return [];
                    }
                },

                async fetchTasks() {
                    try {
                        const data = await APIUtils.fetchData('data.php', {
                            action: 'getData',
                            table: 'tasks'
                        });
                        if (!data || !data.success) return [];
                        return data.data;
                    } catch (error) {
                        console.error("Error fetching tasks:", error);
                        return [];
                    }
                }
            };

            // Dashboard functionality
            class Dashboard {
                constructor() {
                    this.isLoading = false;
                    this.charts = {};
                    this.data = {
                        employees: [],
                        departments: [],
                        positions: [],
                        performances: [],
                        payroll: [],
                        leaves: [],
                        trainings: [],
                        tasks: []
                    };
                    this.initCharts();
                    this.loadData();
                    this.setupEventListeners();
                }

                async loadData() {
                    if (this.isLoading) return;

                    this.isLoading = true;
                    document.getElementById("loadingOverlay").style.display = "flex";

                    try {
                        const [
                            employees,
                            departments,
                            positions,
                            performances,
                            payroll,
                            leaves,
                            trainings,
                            tasks
                        ] = await Promise.all([
                            APIUtils.fetchData('employees'),
                            APIUtils.fetchData('departments'),
                            APIUtils.fetchData('positions'),
                            APIUtils.fetchData('performances'),
                            APIUtils.fetchData('payroll'),
                            APIUtils.fetchData('leaves'),
                            APIUtils.fetchData('trainings'),
                            APIUtils.fetchData('tasks')
                        ]);

                        this.data = {
                            employees,
                            departments,
                            positions,
                            performances,
                            payroll,
                            leaves,
                            trainings,
                            tasks
                        };

                        await this.updateMetrics();
                        await this.updateCharts();
                        await this.updateRecentEmployees();
                    } catch (error) {
                        console.error("Error loading dashboard data:", error);
                        NotificationUtils.show("Lỗi khi tải dữ liệu dashboard", "error");
                    } finally {
                        this.isLoading = false;
                        document.getElementById("loadingOverlay").style.display = "none";
                    }
                }

                async updateMetrics() {
                    const { employees = [], performances = [], payroll = [], leaves = [] } = this.data;

                    try {
                        // Update employee metrics
                        document.getElementById("totalEmployees").textContent = employees.length || 0;
                        document.getElementById("activeEmployees").textContent = 
                            employees.filter(emp => emp?.status === "active").length || 0;
                        document.getElementById("inactiveEmployees").textContent = 
                            employees.filter(emp => emp?.status === "inactive").length || 0;

                        // Update performance metrics
                        const avgPerformance = performances.length > 0 
                            ? performances.reduce((sum, perf) => sum + (perf?.rating || 0), 0) / performances.length 
                            : 0;
                        document.getElementById("kpiCompletion").textContent = 
                            `${Math.round(avgPerformance)}%`;

                        // Update payroll metrics
                        const totalSalary = payroll.length > 0
                            ? payroll.reduce((sum, pay) => sum + (pay?.amount || 0), 0)
                            : 0;
                        document.getElementById("totalSalary").textContent = 
                            CommonUtils.formatCurrency(totalSalary);

                        // Update leaves metrics
                        const pendingLeaves = leaves.length > 0
                            ? leaves.filter(leave => leave?.status === "pending").length
                            : 0;
                        document.getElementById("pendingLeaves").textContent = pendingLeaves;

                        // Update attendance metrics
                        const today = new Date().toISOString().split('T')[0];
                        const todayAttendance = employees.length > 0
                            ? employees.filter(emp => emp?.last_attendance_date === today).length
                            : 0;
                        const attendanceRate = employees.length > 0 
                            ? (todayAttendance / employees.length) * 100 
                            : 0;
                        document.getElementById("todayAttendance").textContent = 
                            `${Math.round(attendanceRate)}%`;
                    } catch (error) {
                        console.error("Error updating metrics:", error);
                        NotificationUtils.show("Lỗi khi cập nhật số liệu", "error");
                    }
                }

                async updateCharts() {
                    const { employees, departments } = this.data;

                    // Update attendance chart
                    const attendanceData =
                        this.processAttendanceData(employees);
                    this.charts.attendance.data.labels = attendanceData.labels;
                    this.charts.attendance.data.datasets[0].data =
                        attendanceData.values;
                    this.charts.attendance.update();

                    // Update department chart
                    const departmentData =
                        this.processDepartmentData(departments);
                    this.charts.department.data.labels = departmentData.labels;
                    this.charts.department.data.datasets[0].data =
                        departmentData.values;
                    this.charts.department.update();
                }

                processAttendanceData(employees) {
                    // Group attendance by date and calculate rates
                    const attendanceByDate = {};
                    employees.forEach((emp) => {
                        if (!attendanceByDate[emp.last_attendance_date]) {
                            attendanceByDate[emp.last_attendance_date] = { present: 0, total: 0 };
                        }
                        attendanceByDate[emp.last_attendance_date].total++;
                        if (emp.status === "present") {
                            attendanceByDate[emp.last_attendance_date].present++;
                        }
                    });

                    const labels = Object.keys(attendanceByDate).sort();
                    const values = labels.map((date) => {
                        const { present, total } = attendanceByDate[date];
                        return (present / total) * 100;
                    });

                    return { labels, values };
                }

                processDepartmentData(departments) {
                    return {
                        labels: departments.map((d) => d.name),
                        values: departments.map((d) => d.employee_count),
                    };
                }

                async updateRecentEmployees() {
                    const { employees } = this.data;
                    const recentEmployees = employees
                        .sort(
                            (a, b) =>
                                new Date(b.join_date) - new Date(a.join_date)
                        )
                        .slice(0, 10);

                    const tbody = document.getElementById("recentEmployees");
                    tbody.innerHTML = recentEmployees
                        .map(
                            (emp) => `
                        <tr>
                            <td>${emp.employee_id}</td>
                            <td>${emp.full_name}</td>
                            <td>${emp.position}</td>
                            <td>${emp.department}</td>
                            <td>${CommonUtils.formatDate(emp.join_date)}</td>
                            <td>${CommonUtils.formatDate(emp.birth_date)}</td>
                            <td>${emp.phone}</td>
                            <td>${emp.email}</td>
                            <td>${emp.address}</td>
                            <td>${emp.status}</td>
                            <td>
                                <button class="btn btn-sm btn-primary" onclick="window.location.href='employees/edit.html?id=${
                                    emp.id
                                }'">
                                    <i class="fas fa-edit"></i>
                                </button>
                            </td>
                        </tr>
                    `
                        )
                        .join("");
                }

                cleanup() {
                    // Cleanup charts
                    Object.values(this.charts).forEach((chart) =>
                        chart.destroy()
                    );
                    this.charts = {};

                    // Remove event listeners
                    document
                        .getElementById("darkModeToggle")
                        .removeEventListener("click", this.toggleDarkMode);
                    document
                        .getElementById("logoutBtn")
                        .removeEventListener("click", this.handleLogout);
                    document
                        .getElementById("menuToggle")
                        .removeEventListener("click", this.toggleSidebar);
                    document
                        .getElementById("attendancePeriod")
                        .removeEventListener(
                            "change",
                            this.handleAttendancePeriodChange
                        );
                }

                initCharts() {
                    // Initialize attendance chart
                    const attendanceCtx = document.getElementById("attendanceChart");
                    if (attendanceCtx) {
                        if (this.charts.attendance) {
                            this.charts.attendance.destroy();
                        }
                        this.charts.attendance = new Chart(attendanceCtx, {
                            type: "line",
                            data: {
                                labels: [],
                                datasets: [
                                    {
                                        label: "Tỷ lệ chấm công",
                                        data: [],
                                        borderColor: "#4CAF50",
                                        tension: 0.1,
                                    },
                                ],
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                            },
                        });
                    }

                    // Initialize department chart
                    const departmentCtx = document.getElementById("departmentChart");
                    if (departmentCtx) {
                        if (this.charts.department) {
                            this.charts.department.destroy();
                        }
                        this.charts.department = new Chart(departmentCtx, {
                            type: "pie",
                            data: {
                                labels: [],
                                datasets: [
                                    {
                                        data: [],
                                        backgroundColor: [
                                            "#FF6384",
                                            "#36A2EB",
                                            "#FFCE56",
                                            "#4BC0C0",
                                            "#9966FF",
                                        ],
                                    },
                                ],
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                            },
                        });
                    }
                }

                setupEventListeners() {
                    // Dark mode toggle
                    document
                        .getElementById("darkModeToggle")
                        .addEventListener("click", () => {
                            UIUtils.toggleDarkMode();
                        });

                    // Logout button
                    document
                        .getElementById("logoutBtn")
                        .addEventListener("click", () => {
                            AuthUtils.logout();
                        });

                    // Menu toggle
                    document
                        .getElementById("menuToggle")
                        .addEventListener("click", () => {
                            UIUtils.toggleSidebar();
                        });

                    // Attendance period change
                    document
                        .getElementById("attendancePeriod")
                        .addEventListener("change", async (e) => {
                            await this.updateAttendanceChart(e.target.value);
                        });
                }

                async updateAttendanceChart(period) {
                    try {
                        const data = await APIUtils.fetchData(
                            `attendance/trend?period=${period}`
                        );
                        this.attendanceChart.data.labels = data.labels;
                        this.attendanceChart.data.datasets[0].data =
                            data.values;
                        this.attendanceChart.update();
                    } catch (error) {
                        console.error(
                            "Error updating attendance chart:",
                            error
                        );
                    }
                }
            }

            // Tab functionality
            class TabManager {
                constructor() {
                    this.currentTab = null;
                    this.tabs = new Set();
                    this.setupEventListeners();
                    this.initializeDefaultTab();
                }

                setupEventListeners() {
                    // Add event listeners for tab switching
                    document
                        .querySelectorAll(".nav-link[data-tab]")
                        .forEach((link) => {
                            link.addEventListener("click", (e) => {
                                e.preventDefault();
                                const tabId = link.getAttribute("data-tab");
                                this.switchTab(tabId);
                            });
                        });
                }

                initializeDefaultTab() {
                    const defaultTab =
                        document.querySelector(".nav-link.active");
                    if (defaultTab) {
                        const tabId = defaultTab.getAttribute("data-tab");
                        if (tabId) {
                            this.currentTab = tabId;
                            this.tabs.add(tabId);
                        }
                    }
                }

                switchTab(tabId) {
                    if (!tabId || !document.getElementById(tabId)) {
                        console.error(`Invalid tab ID: ${tabId}`);
                        return;
                    }

                    this.tabs.add(tabId);

                    document.querySelectorAll(".tab-pane").forEach((pane) => {
                        pane.classList.remove("show", "active");
                    });

                    document.querySelectorAll(".nav-link").forEach((link) => {
                        link.classList.remove("active");
                    });

                    const targetPane = document.getElementById(tabId);
                    const targetLink = document.querySelector(
                        `[data-tab="${tabId}"]`
                    );

                    if (targetPane && targetLink) {
                        targetPane.classList.add("show", "active");
                        targetLink.classList.add("active");
                        this.currentTab = tabId;
                    }
                }
            }

            // Initialize dashboard when DOM is loaded
            document.addEventListener("DOMContentLoaded", () => {
                const dashboard = new Dashboard();
                const tabManager = new TabManager();

                // Run system tests
                APITest.runAllTests().catch((error) => {
                    console.error("Failed to run system tests:", error);
                });

                // Check for dark mode preference
                if (localStorage.getItem("darkMode") === "true") {
                    document.body.classList.add("dark-mode");
                }

                // Cleanup on page unload
                window.addEventListener("unload", () => {
                    dashboard.cleanup();
                });

                // Handle submenu toggle on mobile
                const submenuToggles = document.querySelectorAll(
                    ".nav-item.has-submenu > .nav-link"
                );
                submenuToggles.forEach((toggle) => {
                    toggle.addEventListener("click", (e) => {
                        if (window.innerWidth <= 768) {
                            e.preventDefault();
                            const parent = toggle.parentElement;
                            const submenu = parent.querySelector('.submenu');
                            
                            // Toggle active class
                            parent.classList.toggle("active");
                            
                            // Update submenu position
                            if (parent.classList.contains("active")) {
                                submenu.style.position = 'static';
                                submenu.style.transform = 'none';
                                submenu.style.maxHeight = '500px';
                            } else {
                                submenu.style.position = '';
                                submenu.style.transform = '';
                                submenu.style.maxHeight = '0';
                            }

                            // Close other open submenus
                            document
                                .querySelectorAll(".nav-item.has-submenu")
                                .forEach((item) => {
                                    if (
                                        item !== parent &&
                                        item.classList.contains("active")
                                    ) {
                                        item.classList.remove("active");
                                        const otherSubmenu = item.querySelector('.submenu');
                                        if (otherSubmenu) {
                                            otherSubmenu.style.position = '';
                                            otherSubmenu.style.transform = '';
                                            otherSubmenu.style.maxHeight = '0';
                                        }
                                    }
                                });
                        }
                    });
                });

                // Handle menu toggle
                const menuToggle = document.getElementById("menuToggle");
                const sidebar = document.querySelector(".sidebar");
                const sidebarOverlay =
                    document.getElementById("sidebarOverlay");

                menuToggle.addEventListener("click", () => {
                    sidebar.classList.toggle("active");
                    sidebarOverlay.classList.toggle("active");
                });

                // Close sidebar when clicking overlay
                sidebarOverlay.addEventListener("click", () => {
                    sidebar.classList.remove("active");
                    sidebarOverlay.classList.remove("active");
                });

                // Handle window resize
                window.addEventListener("resize", () => {
                    if (window.innerWidth > 768) {
                        sidebar.classList.remove("active");
                        sidebarOverlay.classList.remove("active");
                    }
                });
            });
        </script>
        <style>
            /* Dark Mode Variables */
            :root {
                /* Light mode default colors */
                --bg-primary: #ffffff;
                --bg-secondary: #f8f9fa;
                --text-primary: #333333;
                --text-secondary: #666666;
                --border-color: #dee2e6;
                --card-bg: #ffffff;
                --card-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                --hover-bg: rgba(0, 0, 0, 0.05);
                --active-bg: rgba(0, 0, 0, 0.1);
                --input-bg: #ffffff;
                --input-border: #ced4da;
                --table-header-bg: #f8f9fa;
                --table-row-hover: rgba(0, 0, 0, 0.05);
                --scrollbar-track: #f1f1f1;
                --scrollbar-thumb: #c1c1c1;
                --modal-bg: #ffffff;
                --modal-overlay: rgba(0, 0, 0, 0.5);
            }

            /* Dark mode colors */
            [data-theme="dark"] {
                --bg-primary: #31393C;
                --bg-secondary: #1a1a1a;
                --text-primary: #ffffff;
                --text-secondary: #b0b0b0;
                --border-color: #404040;
                --card-bg: #2d2d2d;
                --card-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
                --hover-bg: rgba(255, 255, 255, 0.1);
                --active-bg: rgba(255, 255, 255, 0.15);
                --input-bg: #2d2d2d;
                --input-border: #404040;
                --table-header-bg: #2d2d2d;
                --table-row-hover: rgba(255, 255, 255, 0.1);
                --scrollbar-track: #2d2d2d;
                --scrollbar-thumb: #404040;
                --modal-bg: #2d2d2d;
                --modal-overlay: rgba(0, 0, 0, 0.7);
                
                /* New color variables */
                --primary-color: #2176FF;
                --secondary-color: #33A1FD;
                --accent-color: #FDCA40;
                --warning-color: #F79824;
                --success-color: #4CAF50;
                --error-color: #f44336;
                --info-color: #2196F3;
            }

            /* Theme transition */
            .theme-transition,
            .theme-transition *,
            .theme-transition *:before,
            .theme-transition *:after {
                transition: all 0.3s ease !important;
            }

            /* Dark mode styles */
            [data-theme="dark"] body {
                background-color: var(--bg-primary);
                color: var(--text-primary);
            }
            /* Dark Mode Menu Styles */
[data-theme="dark"] .nav-link,
[data-theme="dark"] .dropdown-item {
    color: #ffffff !important;
}

[data-theme="dark"] .nav-link:hover,
[data-theme="dark"] .dropdown-item:hover {
    color: #cccccc !important;
    background-color: rgba(255, 255, 255, 0.1) !important;
}

[data-theme="dark"] .nav-link.active,
[data-theme="dark"] .dropdown-item.active {
    color: #ffffff !important;
    background-color: rgba(255, 255, 255, 0.2) !important;
}

[data-theme="dark"] .nav-link i,
[data-theme="dark"] .dropdown-item i {
    color: #ffffff !important;
}

[data-theme="dark"] .nav-link:hover i,
[data-theme="dark"] .dropdown-item:hover i {
    color: #cccccc !important;
}

[data-theme="dark"] .dropdown-menu {
    background-color: #2d2d2d !important;
    border: 1px solid #404040 !important;
}

[data-theme="dark"] .dropdown-item {
    border-bottom: 1px solid #404040 !important;
}

[data-theme="dark"] .dropdown-item:last-child {
    border-bottom: none !important;
}

[data-theme="dark"] .dropdown-toggle::after {
    color: #ffffff !important;
}

[data-theme="dark"] .dropdown-toggle:hover::after {
    color: #cccccc !important;
}

            /* Sidebar dark mode */
            [data-theme="dark"] .sidebar {
                background: linear-gradient(180deg, #1a1a1a 0%, #000000 100%);
                color: #fff !important;
            }

            [data-theme="dark"] .nav-link {
                color: #ffffff !important;
            }

            [data-theme="dark"] .nav-link:hover {
                background: rgba(255, 255, 255, 0.05);
                color: #ffffff !important;
            }

            [data-theme="dark"] .nav-link.active {
                background-color: var(--active-bg);
            }

            /* Header dark mode */
            [data-theme="dark"] .header {
                background: linear-gradient(135deg, #31393C 0%, #1a1a1a 100%);
                border-bottom: 1px solid var(--border-color);
            }

            [data-theme="dark"] .header-left h1 {
                color: #FDCA40;
            }

            [data-theme="dark"] .header-controls .form-control {
                background-color: var(--input-bg);
                border-color: var(--input-border);
                color: var(--text-primary);
            }

            [data-theme="dark"] .header-controls .form-control::placeholder {
                color: var(--text-secondary);
            }

            /* Metric cards dark mode */
            [data-theme="dark"] .metric-card {
                background: linear-gradient(135deg, #31393C 0%, #2d2d2d 100%);
                border: 1px solid var(--border-color);
                box-shadow: var(--card-shadow);
            }

            [data-theme="dark"] .stat-value {
                color: #33A1FD;
            }

            [data-theme="dark"] .stat-label {
                color: #b0b0b0;
            }

            /* Tables dark mode */
            [data-theme="dark"] .admin-table {
                background: linear-gradient(135deg, #31393C 0%, #2d2d2d 100%);
                color: #ffffff;
            }

            [data-theme="dark"] .admin-table thead th {
                background-color: #1a1a1a;
                color: #ccc;
                padding: 0.75rem;
                text-align: left;
                border-bottom: 1px solid var(--border-color);
            }

            [data-theme="dark"] .admin-table tbody tr:hover {
                background-color: rgba(255, 255, 255, 0.1);
            }

            /* Charts dark mode */
            [data-theme="dark"] .chart-container {
                background: linear-gradient(135deg, #31393C 0%, #2d2d2d 100%);
                border: 1px solid var(--border-color);
            }

            /* Form elements dark mode */
            [data-theme="dark"] .form-control,
            [data-theme="dark"] .form-select {
                background-color: #2d2d2d;
                border-color: #404040;
                color: #ffffff;
            }

            [data-theme="dark"] .form-control:focus,
            [data-theme="dark"] .form-select:focus {
                background-color: #2d2d2d;
                border-color: #33A1FD;
                color: #ffffff;
            }

            /* Buttons dark mode */
            [data-theme="dark"] .btn-primary {
                background-color: #2176FF;
                border-color: #2176FF;
            }

            [data-theme="dark"] .btn-primary:hover {
                background-color: #33A1FD;
                border-color: #33A1FD;
            }

            [data-theme="dark"] .btn-secondary {
                background-color: var(--bg-secondary);
                border-color: var(--border-color);
                color: var(--text-primary);
            }

            [data-theme="dark"] .btn-warning {
                background-color: #FDCA40;
                border-color: #FDCA40;
                color: #31393C;
            }

            [data-theme="dark"] .btn-warning:hover {
                background-color: #F79824;
                border-color: #F79824;
            }

            

            /* Loading overlay dark mode */
            [data-theme="dark"] .loading-overlay {
                background-color: rgba(0, 0, 0, 0.7);
            }

            /* Notification dark mode */
            [data-theme="dark"] .notification {
                background: linear-gradient(135deg, #31393C 0%, #2d2d2d 100%);
                border: 1px solid var(--border-color);
                color: var(--text-primary);
            }

            [data-theme="dark"] .notification.success {
                border-left: 4px solid #4CAF50;
            }

            [data-theme="dark"] .notification.warning {
                border-left: 4px solid #FDCA40;
            }

            [data-theme="dark"] .notification.error {
                border-left: 4px solid #f44336;
            }

            [data-theme="dark"] .notification.info {
                border-left: 4px solid #33A1FD;
            }

            /* Accordion dark mode */
            [data-theme="dark"] .accordion-item {
                background-color: var(--card-bg);
                border-color: var(--border-color);
            }

            [data-theme="dark"] .accordion-button {
                background-color: var(--card-bg);
                color: var(--text-primary);
            }

            [data-theme="dark"] .accordion-button:not(.collapsed) {
                background-color: var(--active-bg);
                color: var(--text-primary);
            }

            /* Mobile app section dark mode */
            [data-theme="dark"] .mobile-app-stats .stat-card {
                background-color: var(--card-bg);
                border: 1px solid var(--border-color);
            }

            [data-theme="dark"] .mobile-app-stats h4 {
                color: var(--text-primary);
            }

            [data-theme="dark"] .mobile-app-stats p {
                color: var(--text-secondary);
            }

            /* Footer dark mode */
            [data-theme="dark"] .footer {
                background-color: var(--bg-secondary);
                color: var(--text-secondary);
                border-top: 1px solid var(--border-color);
            }

            /* Header Styles */
            .header {
                display: flex;
                flex-wrap: nowrap;
                white-space: nowrap;
                align-items: center;
                justify-content: space-between;
                overflow-x: auto;
                margin-top: -70px;
                padding: 1rem 2rem;
                background: linear-gradient(135deg, #2C3E50 0%, #4CA1AF 100%);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border-bottom: 1px solid rgba(255, 255, 255, 0.2);
                position: sticky;
                top: 0;
                border-radius: 5px;
                z-index: 1000;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }

            .header-left, .header-right, .header-controls {
                flex-shrink: 0;
                min-width: 0;
            }

            .header-left h1 {
                font-size: 1.5rem;
                color: #333;
                margin: 0;
            }

            .header-controls {
                display: flex;
                align-items: center;
                gap: 1rem;
            }

            .header-controls .form-control {
                background: rgba(255, 255, 255, 0.8);
                border: 1px solid rgba(0, 0, 0, 0.1);
                border-radius: 8px;
                padding: 0.5rem 1rem;
                backdrop-filter: blur(5px);
                -webkit-backdrop-filter: blur(5px);
            }

            .header-controls .form-control:focus {
                background: rgba(255, 255, 255, 0.9);
                box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
            }

            .dropdown-menu {
                background: rgba(255, 255, 255, 0.9);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            }

            .dropdown-item {
                padding: 0.5rem 1rem;
                color: #333;
                transition: all 0.3s ease;
            }

            .dropdown-item:hover {
                background: rgba(0, 0, 0, 0.05);
            }

            /* Responsive */
            @media (max-width: 768px) {
                .header {
                    padding: 0.75rem 1rem;
                }

                .header-left h1 {
                    font-size: 1.25rem;
                }

                .header-controls {
                    gap: 0.5rem;
                }

                .header-controls .form-control {
                    width: 120px;
                }
            }
            .nav-link,
            .submenu .nav-link {
                display: flex !important;
                align-items: center !important;
               display: flex !important;
               align-items: center !important;
               font-size: 16px !important;
               padding-top: 8px !important;
               padding-bottom: 8px !important;
            }

            .nav-link i,
            .submenu .nav-link i {
                margin-right: 10px !important;
                font-size: 1.1em !important;
                display: flex !important;
                align-items: center !important;
            }
            .submenu .nav-link {
                padding-left: 30px !important;
                font-size: 15px !important;
            }
            .nav-link,
            .submenu .nav-link {
                display: flex !important;
                align-items: center !important;
                justify-content: flex-start; /* hoặc center nếu muốn cả dòng căn giữa */
                height: 40px; /* hoặc giá trị phù hợp với thiết kế của bạn */
                line-height: 1;
                padding-top: 0 !important;
                padding-bottom: 0 !important;
            }

            .nav-link i,
            .submenu .nav-link i {
                display: flex !important;
                align-items: center !important;
                height: 24px; /* hoặc giá trị phù hợp với icon */
                font-size: 1.1em !important;
                margin-right: 10px !important;
            }

            .nav-link span,
            .submenu .nav-link span {
                display: flex;
                align-items: center;
                height: 100%;
            }

            /* Thêm scrollbar tùy chỉnh cho sidebar */
            .sidebar::-webkit-scrollbar {
                width: 6px;
            }

            .sidebar::-webkit-scrollbar-track {
                background: rgba(255, 255, 255, 0.1);
            }

            .sidebar::-webkit-scrollbar-thumb {
                background: rgba(255, 255, 255, 0.2);
                border-radius: 3px;
            }

            .sidebar::-webkit-scrollbar-thumb:hover {
                background: rgba(255, 255, 255, 0.3);
            }

            /* Điều chỉnh main content để không bị che bởi sidebar */
            .main-content {
                margin-left: 250px;
                padding: 1rem;
                min-height: 100vh;
                padding-top: 80px; /* Thêm padding top để tránh bị che bởi header */
                background-color: #FAF9F6;
            }

            /* Dark mode specific styles */
            [data-theme="dark"] .main-content {
                background-color: #31393C;
            }

            /* Responsive cho mobile */
            @media (max-width: 768px) {
                .sidebar {
                    transform: translateX(-100%);
                }

                .sidebar.active {
                    transform: translateX(0);
                }

                .main-content {
                    margin-left: 0;
                    padding-top: 80px;
                    background-color: #31393C;
                }
            }

            .nav-link {
                display: flex;
                align-items: center;
                padding: 0.5rem 1rem;
                color: #000000;
                text-decoration: none;
                font-size: 0.85rem;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                transition: all 0.3s ease;
            }

            .nav-link i {
                margin-right: 0.75rem;
                font-size: 1rem;
                width: 20px;
                text-align: center;
                color: #000000;
                flex-shrink: 0;
            }

            .nav-link span {
                flex: 1;
                color: #000000;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
            }

            .nav-link:hover {
                background-color: rgba(0, 0, 0, 0.05);
                width: 100%;
            }

            .nav-link.active {
                background-color: rgba(0, 0, 0, 0.1);
            }

            .submenu {
                background-color: rgba(0, 0, 0, 0.2);
                max-height: 0;
                overflow: hidden;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                transform-origin: top;
                transform: scaleY(0);
            }

            .nav-item.open .submenu {
                max-height: 500px;
                opacity: 1;
                visibility: visible;
                transform: scaleY(1);
            }

            .nav-item.has-submenu > .nav-link {
                position: relative;
            }

            .nav-item.has-submenu > .nav-link .fa-chevron-right {
                transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                position: absolute;
                right: 1rem;
            }

            .nav-item.has-submenu.open > .nav-link .fa-chevron-right {
                transform: rotate(90deg);
            }
            [data-theme="dark"] .nav-link,
            [data-theme="dark"] .submenu .nav-link {
                 color: #fff !important;
            }
 
            /* Thêm hiệu ứng hover cho menu chính */
            .nav-item.has-submenu:hover > .submenu {
                max-height: 500px;
                opacity: 1;
                visibility: visible;
                transform: scaleY(1);
            }

            .nav-item.has-submenu:hover > .nav-link .fa-chevron-right {
                transform: rotate(90deg);
            }

            /* Đảm bảo submenu không bị ẩn khi hover vào nó */
            .submenu:hover {
                max-height: 500px;
                opacity: 1;
                visibility: visible;
                transform: scaleY(1);
            }

            /* Menu Search */
            .menu-search {
                margin-bottom: 1rem;
            }

            .menu-search input {
                width: 100%;
                padding: 0.5rem;
                background-color: rgba(255, 255, 255, 0.8);
                border: none;
                border-radius: 4px;
                color: #000000;
                font-size: 0.85rem;
            }

            .menu-search input::placeholder {
                color: rgba(0, 0, 0, 0.5);
            }

            /* Recent Menu */
            .recent-menu {
                margin-top: 1rem;
                padding-top: 1rem;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
            }

            .recent-menu h3 {
                font-size: 0.9rem;
                color: rgba(0, 0, 0, 0.7);
                margin-bottom: 0.5rem;
            }

            /* Theme Toggle Styles */
            .theme-toggle-wrapper {
                display: flex;
                align-items: center;
                margin: 0 10px;
            }

            .theme-toggle {
                width: 32px;
                height: 32px;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.1);
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                transition: all 0.3s ease;
                position: relative;
                overflow: hidden;
            }

            .theme-toggle:hover {
                background: rgba(255, 255, 255, 0.2);
            }

            .theme-toggle:not(.dark-mode) {
                background: #ffffff;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            }

            .theme-toggle .sun,
            .theme-toggle .moon {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 24px;
                height: 24px;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.3s ease;
                border-radius: 50%;
            }

            .theme-toggle .sun svg,
            .theme-toggle .moon svg {
                width: 20px;
                height: 20px;
                stroke: currentColor;
            }

            .theme-toggle.dark-mode .sun {
                opacity: 0;
                transform: translate(-50%, 20px);
            }

            .theme-toggle.dark-mode .moon {
                opacity: 1;
                transform: translate(-50%, -50%);
            }

            .theme-toggle:not(.dark-mode) .sun {
                opacity: 1;
                transform: translate(-50%, -50%);
                color: #333; /* Màu tối cho icon mặt trời trên nền trắng */
            }

            .theme-toggle:not(.dark-mode) .moon {
                opacity: 0;
                transform: translate(-50%, -20px);
            }

            /* Dark mode adjustments */
            .dark-mode .theme-toggle {
                background: rgba(255, 255, 255, 0.1);
            }

            .dark-mode .theme-toggle:hover {
                background: rgba(255, 255, 255, 0.2);
            }

            .dark-mode .theme-toggle .moon svg {
                stroke: #fff;
            }

            /* Responsive adjustments */
            @media (max-width: 768px) {
                .theme-toggle {
                    width: 28px;
                    height: 28px;
                }
                
                .theme-toggle .sun,
                .theme-toggle .moon {
                    width: 20px;
                    height: 20px;
                }
                
                .theme-toggle .sun svg,
                .theme-toggle .moon svg {
                    width: 16px;
                    height: 16px;
                }
            }
            /* Metrics Grid Styles */


.stat-icon {
    font-size: 1.8rem;
    background: #4158D0;
    background-image: linear-gradient(43deg, #4158D0 0%, #C850C0 46%, #FFCC70 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    color: transparent;
    margin-bottom: 0.75rem;
    transition: transform 0.3s ease;
    display: inline-block;
}

/* Dark Mode Support */
[data-theme="dark"] .stat-icon {
    background: #4158D0;
    background-image: linear-gradient(43deg, #4158D0 0%, #C850C0 46%, #FFCC70 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    color: transparent;
}


/* Metrics Grid Styles */
.metrics-grid {
    margin-bottom: 1.5rem;
    padding: 1rem;
    background: var(--bg-secondary, #f8f9fa);
    border-radius: 8px;
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
}

.metrics-grid:hover {
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
}

.metrics-grid .row {
    margin: -0.5rem;
}

.metrics-grid .col {
    padding: 0.5rem;
}

.metric-card {
    background: var(--card-bg, #ffffff);
    border-radius: 8px;
    padding: 1rem;
    height: 100%;
    position: relative;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid var(--border-color, #e9ecef);
}

.metric-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(90deg, var(--primary-color, #4CAF50), var(--secondary-color, #45a049));
    opacity: 0;
    transition: opacity 0.3s ease;
}

.metric-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.metric-card:hover::before {
    opacity: 1;
}

.metric-card.priority-1 {
    border-left: 3px solid var(--primary-color, #4CAF50);
}

.metric-card.priority-2 {
    border-left: 3px solid var(--warning-color, #FFC107);
}

.metric-card.priority-3 {
    border-left: 3px solid var(--info-color, #2196F3);
}

.stat-icon {
    font-size: 1.8rem;
    background: #4158D0;
    background-image: linear-gradient(43deg, #4158D0 0%, #C850C0 46%, #FFCC70 100%);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    margin-bottom: 0.75rem;
    transition: transform 0.3s ease;
}

.metric-card:hover .stat-icon {
    transform: scale(1.05);
}

.stat-content {
    position: relative;
    z-index: 1;
}

.stat-value {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-primary, #333);
    margin-bottom: 0.25rem;
    line-height: 1.2;
    font-family: 'Roboto', sans-serif;
}

.stat-label {
    font-size: 0.85rem;
    color: var(--text-secondary, #666);
    margin-bottom: 0;
    line-height: 1.3;
}

/* Dark Mode Support */
[data-theme="dark"] .metrics-grid {
    background: var(--dark-bg-secondary, #1a1a1a);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.2);
}

[data-theme="dark"] .metric-card {
    background: var(--dark-card-bg, #2d2d2d);
    border-color: var(--dark-border-color, #404040);
}

[data-theme="dark"] .stat-value {
    color: var(--dark-text-primary, #fff);
}

[data-theme="dark"] .stat-label {
    color: var(--dark-text-secondary, #aaa);
}

/* Responsive Design */
@media (max-width: 1200px) {
    .metrics-grid {
        padding: 0.75rem;
    }
    
    .stat-value {
        font-size: 1.4rem;
    }
}

@media (max-width: 768px) {
    .metrics-grid {
        padding: 0.5rem;
        margin-bottom: 1.5rem;
    }
    
    .metric-card {
        padding: 0.75rem;
    }
    
    .stat-icon {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
    }
    
    .stat-value {
        font-size: 1.3rem;
    }
    
    .stat-label {
        font-size: 0.8rem;
    }
}

/* Animation Effects */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.metric-card {
    animation: fadeInUp 0.4s ease forwards;
    opacity: 0;
}

.metric-card:nth-child(1) { animation-delay: 0.05s; }
.metric-card:nth-child(2) { animation-delay: 0.1s; }
.metric-card:nth-child(3) { animation-delay: 0.15s; }
.metric-card:nth-child(4) { animation-delay: 0.2s; }
.metric-card:nth-child(5) { animation-delay: 0.25s; }
.metric-card:nth-child(6) { animation-delay: 0.3s; }

/* Hover Effects */
.metric-card:hover {
    background: linear-gradient(135deg, var(--card-bg, #ffffff) 0%, var(--hover-bg, #f8f9fa) 100%);
}

[data-theme="dark"] .metric-card:hover {
    background: linear-gradient(135deg, var(--dark-card-bg, #2d2d2d) 0%, var(--dark-hover-bg, #333333) 100%);
}

/* Loading State */
.metric-card.loading {
    position: relative;
    overflow: hidden;
}

.metric-card.loading::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    animation: loading 1.5s infinite;
}

@keyframes loading {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

/* Error State */
.metric-card.error {
    border-left-color: var(--error-color, #f44336);
}

.metric-card.error .stat-value,
.metric-card.error .stat-label {
    color: var(--error-color, #f44336);
}

/* Success State */
.metric-card.success {
    border-left-color: var(--success-color, #4CAF50);
}

.metric-card.success .stat-value {
    color: var(--success-color, #4CAF50);
}

/* Warning State */
.metric-card.warning {
    border-left-color: var(--warning-color, #FFC107);
}

.metric-card.warning .stat-value {
    color: var(--warning-color, #FFC107);
}

/* Info State */
.metric-card.info {
    border-left-color: var(--info-color, #2196F3);
}

.metric-card.info .stat-value {
    color: var(--info-color, #2196F3);
}

/* Dark Mode Support */
[data-theme="dark"] .stat-icon {
    background: #4158D0;
    background-image: linear-gradient(43deg, #4158D0 0%, #C850C0 46%, #FFCC70 100%);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
} 
            /* Add styles for new components */
            /* Breadcrumb styles */
            .breadcrumb-nav {
                margin: 1rem 0;
                padding: 0.5rem 1rem;
                background-color: var(--bg-secondary);
                border-radius: 4px;
            }

            .breadcrumb {
                margin: 0;
                padding: 0;
            }

            /* Quick actions panel styles */
            .quick-actions-panel {
                margin: 1rem 0;
                padding: 1rem;
                background-color: var(--bg-secondary);
                border-radius: 4px;
            }

            .quick-actions-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1rem;
                margin-top: 1rem;
            }

            .quick-action-btn {
                display: flex;
                flex-direction: column;
                align-items: center;
                padding: 1rem;
                background-color: var(--card-bg);
                border: 1px solid var(--border-color);
                border-radius: 4px;
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .quick-action-btn:hover {
                background-color: var(--hover-bg);
                transform: translateY(-2px);
            }

            .quick-action-btn i {
                font-size: 1.5rem;
                margin-bottom: 0.5rem;
            }

            /* Notification center styles */
            .notification-center {
                position: fixed;
                top: 0;
                right: 0;
                width: 300px;
                height: 100vh;
                background-color: var(--bg-primary);
                border-left: 1px solid var(--border-color);
                z-index: 1000;
                transform: translateX(100%);
                transition: transform 0.3s ease;
            }

            .notification-center.active {
                transform: translateX(0);
            }

            .notification-header {
                padding: 1rem;
                border-bottom: 1px solid var(--border-color);
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .notification-list {
                padding: 1rem;
                overflow-y: auto;
                height: calc(100vh - 60px);
            }

            /* Calendar widget styles */
            .calendar-widget {
                background-color: var(--card-bg);
                border: 1px solid var(--border-color);
                border-radius: 4px;
                padding: 1rem;
                margin: 1rem 0;
            }

            .calendar-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;
            }

            .calendar-controls {
                display: flex;
                align-items: center;
                gap: 1rem;
            }

            .calendar-body {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 0.5rem;
            }

            /* Task list widget styles */
            .task-list-widget {
                background-color: var(--card-bg);
                border: 1px solid var(--border-color);
                border-radius: 4px;
                padding: 1rem;
                margin: 1rem 0;
            }

            .task-list-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;
            }

            .task-list {
                max-height: 300px;
                overflow-y: auto;
            }

            /* Weather widget styles */
            .weather-widget {
                background-color: var(--card-bg);
                border: 1px solid var(--border-color);
                border-radius: 4px;
                padding: 1rem;
                margin: 1rem 0;
            }

            .weather-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;
            }

            .weather-location {
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            /* Chat widget styles */
            .chat-widget {
                background-color: var(--card-bg);
                border: 1px solid var(--border-color);
                border-radius: 4px;
                padding: 1rem;
                margin: 1rem 0;
            }

            .chat-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;
            }

            .chat-list {
                max-height: 300px;
                overflow-y: auto;
            }

            /* Backup widget styles */
            .backup-widget {
                background-color: var(--card-bg);
                border: 1px solid var(--border-color);
                border-radius: 4px;
                padding: 1rem;
                margin: 1rem 0;
            }

            .backup-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1rem;
            }

            .backup-info {
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
            }

            /* Calendar widget styles */
            .calendar-widget h3 {
                font-size: 18px;
                margin: 0;
            }

            /* Task list widget styles */
            .task-list-widget h3 {
                font-size: 18px;
                margin: 0;
            }

            /* Weather widget styles */
            .weather-widget h3 {
                font-size: 18px;
                margin: 0;
            }

            .weather-location span {
                font-size: 18px;
            }

            /* Chat widget styles */
            .chat-widget h3 {
                font-size: 18px;
                margin: 0;
            }

            /* Backup widget styles */
            .backup-widget h3 {
                font-size: 18px;
                margin: 0;
            }

            .backup-info p {
                font-size: 18px;
                margin: 0;
            }

            /* Data section styles for dark mode */
            [data-theme="dark"] .data-section {
                background-color: #31393C;
                border: 1px solid var(--border-color);
                border-radius: 4px;
                padding: 1rem;
                margin-bottom: 1rem;
            }

            [data-theme="dark"] .data-section.main-chart.h-100 {
                background-color: #31393C;
                border: 1px solid var(--border-color);
                border-radius: 4px;
                padding: 1rem;
                margin-bottom: 1rem;
                height: 100%;
            }

            [data-theme="dark"] .data-section.h-100 {
                background-color: #31393C;
                border: 1px solid var(--border-color);
                border-radius: 4px;
                padding: 1rem;
                margin-bottom: 1rem;
                height: 100%;
            }

            /* Section header styles for dark mode */
            [data-theme="dark"] .section-header {
                border-bottom: 1px solid var(--border-color);
                padding-bottom: 0.5rem;
                margin-bottom: 1rem;
            }

            [data-theme="dark"] .section-title {
                color: #FDCA40;
                margin: 0;
                font-size: 1.25rem;
            }

            /* Leaderboard styles for dark mode */
            [data-theme="dark"] .leaderboard {
                background-color: #31393C;
                border: 1px solid var(--border-color);
                border-radius: 4px;
                padding: 1rem;
                margin-bottom: 1rem;
            }

            [data-theme="dark"] .leaderboard table {
                width: 100%;
                border-collapse: collapse;
            }

            [data-theme="dark"] .leaderboard th {
                background-color: #1a1a1a;
                color: #FDCA40;
                padding: 0.75rem;
                text-align: left;
                border-bottom: 1px solid var(--border-color);
            }

            [data-theme="dark"] .leaderboard td {
                padding: 0.75rem;
                color: #ffffff;
                border-bottom: 1px solid var(--border-color);
            }

            [data-theme="dark"] .leaderboard tr:hover {
                background-color: rgba(255, 255, 255, 0.1);
            }

            /* Base font styles */
            body {
                font-family: 'Inter', sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            /* Headings */
            h1, h2, h3, h4, h5, h6 {
                font-family: 'Roboto', sans-serif;
                font-weight: 500;
            }

            /* Specific text styles */
            .header-left h1 {
                font-family: 'Roboto', sans-serif;
                font-weight: 700;
            }

            .section-title {
                font-family: 'Roboto', sans-serif;
                font-weight: 500;
            }

            .stat-value {
                font-family: 'Inter', sans-serif;
                font-weight: 600;
            }

            .stat-label {
                font-family: 'Inter', sans-serif;
                font-weight: 400;
            }

            /* Form elements */
            .form-control, .form-select {
                font-family: 'Inter', sans-serif;
                font-weight: 400;
            }

            /* Buttons */
            .btn {
                font-family: 'Inter', sans-serif;
                font-weight: 500;
            }

            /* Table text */
            .admin-table th {
                font-family: 'Roboto', sans-serif;
                font-weight: 500;
            }

            .admin-table td {
                font-family: 'Inter', sans-serif;
                font-weight: 400;
            }

            /* Widget titles */
            .widget-title {
                font-family: 'Roboto', sans-serif;
                font-weight: 500;
            }

            /* Notification text */
            .notification {
                font-family: 'Inter', sans-serif;
                font-weight: 400;
            }

            /* Dark mode specific font colors */
            [data-theme="dark"] {
                --text-primary: #ffffff;
                --text-secondary: #b0b0b0;
            }

            [data-theme="dark"] body {
                color: var(--text-primary);
            }

            [data-theme="dark"] .text-secondary {
                color: var(--text-secondary);
            }

            /* Icon Styles */
            .icon-container {
                display: inline-block;
                margin: 10px;
            }

            .icon {
                width: 24px;
                height: 24px;
                display: inline-block;
                background-size: contain;
                background-repeat: no-repeat;
                background-position: center;
                filter: grayscale(100%) brightness(0.6);
                transition: all 0.3s ease;
            }

            .icon i {
                color: #666666; /* Gray color for light theme */
            }

            [data-theme="dark"] .icon i {
                color: #999999; /* Lighter gray for dark theme */
            }

            /* Hover effect */
            .icon:hover {
                filter: grayscale(100%) brightness(0.4);
                transform: scale(1.1);
            }

            [data-theme="dark"] .icon:hover {
                filter: grayscale(100%) brightness(1);
            }

            /* Active state */
            .icon.active {
                filter: grayscale(100%) brightness(0.2);
            }

            [data-theme="dark"] .icon.active {
                filter: grayscale(100%) brightness(1);
            }

            /* Remove all background color styles for icons */
            [data-theme="light"] .icon.fa-users,
            [data-theme="light"] .icon.fa-user-plus,
            [data-theme="light"] .icon.fa-user-check,
            [data-theme="light"] .icon.fa-clock,
            [data-theme="light"] .icon.fa-calendar,
            [data-theme="light"] .icon.fa-bullseye,
            [data-theme="light"] .icon.fa-chart-line,
            [data-theme="light"] .icon.fa-project-diagram,
            [data-theme="light"] .icon.fa-tasks {
                background-color: transparent;
            }

            /* HR & Employee Management Icons */
            [data-theme="light"] .icon.fa-users,
            [data-theme="light"] .icon.fa-user-plus,
            [data-theme="light"] .icon.fa-user-check {
                background-color: #97dbae;
            }

            /* Time & Attendance Icons */
            [data-theme="light"] .icon.fa-clock,
            [data-theme="light"] .icon.fa-calendar {
                background-color: #ffcdaa;
            }

            /* Performance & KPI Icons */
            [data-theme="light"] .icon.fa-bullseye,
            [data-theme="light"] .icon.fa-chart-line {
                background-color: #f5eb6d;
            }

            /* Project & Task Icons */
            [data-theme="light"] .icon.fa-project-diagram,
            [data-theme="light"] .icon.fa-tasks {
                background-color: #c6df76;
            }

            /* Finance & Payroll Icons */
            [data-theme="light"] .icon.fa-money-bill,
            [data-theme="light"] .icon.fa-calculator {
                background-color: #ffe3b3;
            }

            /* Training & Development Icons */
            [data-theme="light"] .icon.fa-graduation-cap,
            [data-theme="light"] .icon.fa-book {
                background-color: #9cb898;
            }

            /* System & Settings Icons */
            [data-theme="light"] .icon.fa-cog,
            [data-theme="light"] .icon.fa-tools {
                background-color: #ffcdaa;
            }

            /* Dark Mode Icons */
            [data-theme="dark"] .icon {
                background-color: #2d2d2d;
            }

            [data-theme="dark"] .icon i {
                color: #ffffff;
            }

            /* Hover Effects */
            .icon:hover {
                transform: scale(1.1);
            }

            /* Responsive Adjustments */
            @media (max-width: 768px) {
                .icon {
                    width: 60px;
                    height: 60px;
                }
            }

            /* Stat Icon Styles */
            .stat-icon {
                width: 60px;
                height: 60px;
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-bottom: 1rem;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
            }

            /* Light Mode Stat Icons */
            [data-theme="light"] .stat-icon {
                background-color: #97dbae;
            }

            [data-theme="light"] .stat-icon i {
                color: #ffffff;
                font-size: 1.5rem;
            }

            /* Dark Mode Stat Icons */
            [data-theme="dark"] .stat-icon {
                background-color: #2d2d2d;
            }

            [data-theme="dark"] .stat-icon i {
                color: #ffffff;
                font-size: 1.5rem;
            }

            /* Hover Effects for Stat Icons */
            .stat-icon:hover {
                transform: scale(1.1);
            }

            /* Responsive Adjustments for Stat Icons */
            @media (max-width: 768px) {
                .stat-icon {
                    width: 50px;
                    height: 50px;
                }
                
                .stat-icon i {
                    font-size: 1.25rem;
                }
            }

            /* Menu Icons */
            .nav-link i {
                width: 20px;
                text-align: center;
                margin-right: 0.75rem;
                font-size: 1rem;
                transition: transform 0.2s ease;
            }

            .nav-link:hover i {
                transform: scale(1.1);
            }

            /* Quick Action Icons */
            .quick-action-btn i {
                font-size: 1.5rem;
                margin-bottom: 0.5rem;
                transition: transform 0.2s ease;
            }

            .quick-action-btn:hover i {
                transform: scale(1.1);
            }

            /* Widget Icons */
            .widget-icon {
                width: 40px;
                height: 40px;
                margin-right: 1rem;
            }

            .widget-icon i {
                font-size: 1.25rem;
            }

            /* Notification Icons */
            .notification-icon {
                width: 30px;
                height: 30px;
                margin-right: 0.5rem;
            }

            .notification-icon i {
                font-size: 1rem;
            }

            /* Chart Icons */
            .chart-icon {
                width: 50px;
                height: 50px;
                margin-bottom: 0.5rem;
            }

            .chart-icon i {
                font-size: 1.5rem;
            }

            /* Mobile App Icons */
            .mobile-app-icon {
                width: 70px;
                height: 70px;
                margin-bottom: 1rem;
            }

            .mobile-app-icon i {
                font-size: 2rem;
            }

            /* Responsive Adjustments */
            @media (max-width: 768px) {
                .icon {
                    width: 60px;
                    height: 60px;
                }

                .icon i {
                    font-size: 1.5rem;
                }

                .stat-icon {
                    width: 50px;
                    height: 50px;
                }

                .mobile-app-icon {
                    width: 60px;
                    height: 60px;
                }
            }

            /* Data Section Spacing */
            .data-section {
                margin-bottom: 2rem;
                padding: 1.5rem;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }

            .data-section.h-100 {
                margin-bottom: 2rem;
                padding: 1.5rem;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }

            .accordion-body {
                padding: 1.5rem;
                margin-bottom: 1.5rem;
            }

            /* Dark mode specific spacing */
            [data-theme="dark"] .data-section {
                margin-bottom: 2rem;
                padding: 1.5rem;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            }

            [data-theme="dark"] .data-section.h-100 {
                margin-bottom: 2rem;
                padding: 1.5rem;
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            }

            [data-theme="dark"] .accordion-body {
                padding: 1.5rem;
                margin-bottom: 1.5rem;
            }

            /* Responsive adjustments */
            @media (max-width: 768px) {
                .data-section {
                    margin-bottom: 1.5rem;
                    padding: 1rem;
                }

                .data-section.h-100 {
                    margin-bottom: 1.5rem;
                    padding: 1rem;
                }

                .accordion-body {
                    padding: 1rem;
                    margin-bottom: 1rem;
                }
            }

            /* Metric Card Icon Styles */
            .metric-card .stat-icon {
                width: 60px;
                height: 60px;
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-bottom: 1rem;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
            }

            /* Light Mode */
            [data-theme="light"] .metric-card .stat-icon {
                background-color: #FAEBD7;
            }

            [data-theme="light"] .metric-card .stat-icon i {
                color: #A52A2A;
                font-size: 1.5rem;
            }

            [data-theme="light"] .metric-card:hover .stat-icon {
                background-color: #FFC0CB;
                transform: scale(1.1);
            }

            [data-theme="light"] .metric-card:hover .stat-icon i {
                color: #FF6347;
            }

            /* Dark Mode */
            [data-theme="dark"] .metric-card .stat-icon {
                background-color: #2d2d2d;
            }

            [data-theme="dark"] .metric-card .stat-icon i {
                color: #FDCA40;
                font-size: 1.5rem;
            }

            [data-theme="dark"] .metric-card:hover .stat-icon {
                background-color: #31393C;
                transform: scale(1.1);
            }

            [data-theme="dark"] .metric-card:hover .stat-icon i {
                color: #33A1FD;
            }

            /* Apply same styles to all other icons */
            .nav-link i,
            .quick-action-btn i,
            .widget-icon i,
            .notification-icon i,
            .chart-icon i,
            .mobile-app-icon i,
            .ai-prediction-card i,
            .sentiment-analysis-card i,
            .leaderboard i,
            .achievements i {
                width: 60px;
                height: 60px;
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-bottom: 1rem;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
            }

            /* Light Mode for all icons */
            [data-theme="light"] .nav-link i,
            [data-theme="light"] .quick-action-btn i,
            [data-theme="light"] .widget-icon i,
            [data-theme="light"] .notification-icon i,
            [data-theme="light"] .chart-icon i,
            [data-theme="light"] .mobile-app-icon i,
            [data-theme="light"] .ai-prediction-card i,
            [data-theme="light"] .sentiment-analysis-card i,
            [data-theme="light"] .leaderboard i,
            [data-theme="light"] .achievements i {
                background-color: #FAEBD7;
                color: #A52A2A;
                font-size: 1.5rem;
            }

            [data-theme="light"] .nav-link:hover i,
            [data-theme="light"] .quick-action-btn:hover i,
            [data-theme="light"] .widget-icon:hover i,
            [data-theme="light"] .notification-icon:hover i,
            [data-theme="light"] .chart-icon:hover i,
            [data-theme="light"] .mobile-app-icon:hover i,
            [data-theme="light"] .ai-prediction-card:hover i,
            [data-theme="light"] .sentiment-analysis-card:hover i,
            [data-theme="light"] .leaderboard:hover i,
            [data-theme="light"] .achievements:hover i {
                background-color: #FFC0CB;
                color: #FF6347;
                transform: scale(1.1);
            }

            /* Dark Mode for all icons */
            [data-theme="dark"] .nav-link i,
            [data-theme="dark"] .quick-action-btn i,
            [data-theme="dark"] .widget-icon i,
            [data-theme="dark"] .notification-icon i,
            [data-theme="dark"] .chart-icon i,
            [data-theme="dark"] .mobile-app-icon i,
            [data-theme="dark"] .ai-prediction-card i,
            [data-theme="dark"] .sentiment-analysis-card i,
            [data-theme="dark"] .leaderboard i,
            [data-theme="dark"] .achievements i {
                background-color: #2d2d2d;
                color: #FDCA40;
                font-size: 1.5rem;
            }

            [data-theme="dark"] .nav-link:hover i,
            [data-theme="dark"] .quick-action-btn:hover i,
            [data-theme="dark"] .widget-icon:hover i,
            [data-theme="dark"] .notification-icon:hover i,
            [data-theme="dark"] .chart-icon:hover i,
            [data-theme="dark"] .mobile-app-icon:hover i,
            [data-theme="dark"] .ai-prediction-card:hover i,
            [data-theme="dark"] .sentiment-analysis-card:hover i,
            [data-theme="dark"] .leaderboard:hover i,
            [data-theme="dark"] .achievements:hover i {
                background-color: #31393C;
                color: #33A1FD;
                transform: scale(1.1);
            }

            /* Responsive adjustments */
            @media (max-width: 768px) {
                .metric-card .stat-icon,
                .nav-link i,
                .quick-action-btn i,
                .widget-icon i,
                .notification-icon i,
                .chart-icon i,
                .mobile-app-icon i,
                .ai-prediction-card i,
                .sentiment-analysis-card i,
                .leaderboard i,
                .achievements i {
                    width: 50px;
                    height: 50px;
                    font-size: 1.25rem;
                }
            }

            /* Mobile App Stats Icons */
            .mobile-app-stats .stat-card i {
                width: 60px;
                height: 60px;
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-bottom: 1rem;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
            }

            /* Light Mode */
            [data-theme="light"] .mobile-app-stats .stat-card i {
                background-color: #FAEBD7;
                color: #A52A2A;
                font-size: 1.5rem;
            }

            [data-theme="light"] .mobile-app-stats .stat-card:hover i {
                background-color: #FFC0CB;
                color: #FF6347;
                transform: scale(1.1);
            }

            /* Dark Mode */
            [data-theme="dark"] .mobile-app-stats .stat-card i {
                background-color: #2d2d2d;
                color: #FDCA40;
                font-size: 1.5rem;
            }

            [data-theme="dark"] .mobile-app-stats .stat-card:hover i {
                background-color: #31393C;
                color: #33A1FD;
                transform: scale(1.1);
            }

            /* Responsive adjustments */
            @media (max-width: 768px) {
                .mobile-app-stats .stat-card i {
                    width: 50px;
                    height: 50px;
                    font-size: 1.25rem;
                }
            }

            /* Main Content Icon Styles */
            .main-content .stat-icon,
            .main-content .quick-action-btn i,
            .main-content .widget-icon i,
            .main-content .notification-icon i,
            .main-content .chart-icon i,
            .main-content .mobile-app-icon i,
            .main-content .ai-prediction-card i,
            .main-content .sentiment-analysis-card i,
            .main-content .leaderboard i,
            .main-content .achievements i,
            .main-content .mobile-app-stats .stat-card i {
                width: 60px;
                height: 60px;
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-bottom: 1rem;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
            }

            /* Light Mode */
            [data-theme="light"] .main-content .stat-icon,
            [data-theme="light"] .main-content .quick-action-btn i,
            [data-theme="light"] .main-content .widget-icon i,
            [data-theme="light"] .main-content .notification-icon i,
            [data-theme="light"] .main-content .chart-icon i,
            [data-theme="light"] .main-content .mobile-app-icon i,
            [data-theme="light"] .main-content .ai-prediction-card i,
            [data-theme="light"] .main-content .sentiment-analysis-card i,
            [data-theme="light"] .main-content .leaderboard i,
            [data-theme="light"] .main-content .achievements i,
            [data-theme="light"] .main-content .mobile-app-stats .stat-card i {
                background-color: #FAEBD7;
                color: #A52A2A;
                font-size: 1.5rem;
            }

            [data-theme="light"] .main-content .stat-icon:hover,
            [data-theme="light"] .main-content .quick-action-btn:hover i,
            [data-theme="light"] .main-content .widget-icon:hover i,
            [data-theme="light"] .main-content .notification-icon:hover i,
            [data-theme="light"] .main-content .chart-icon:hover i,
            [data-theme="light"] .main-content .mobile-app-icon:hover i,
            [data-theme="light"] .main-content .ai-prediction-card:hover i,
            [data-theme="light"] .main-content .sentiment-analysis-card:hover i,
            [data-theme="light"] .main-content .leaderboard:hover i,
            [data-theme="light"] .main-content .achievements:hover i,
            [data-theme="light"] .main-content .mobile-app-stats .stat-card:hover i {
                background-color: #FFC0CB;
                color: #FF6347;
                transform: scale(1.1);
            }

            /* Dark Mode */
            [data-theme="dark"] .main-content .stat-icon,
            [data-theme="dark"] .main-content .quick-action-btn i,
            [data-theme="dark"] .main-content .widget-icon i,
            [data-theme="dark"] .main-content .notification-icon i,
            [data-theme="dark"] .main-content .chart-icon i,
            [data-theme="dark"] .main-content .mobile-app-icon i,
            [data-theme="dark"] .main-content .ai-prediction-card i,
            [data-theme="dark"] .main-content .sentiment-analysis-card i,
            [data-theme="dark"] .main-content .leaderboard i,
            [data-theme="dark"] .main-content .achievements i,
            [data-theme="dark"] .main-content .mobile-app-stats .stat-card i {
                background-color: #2d2d2d;
                color: #FDCA40;
                font-size: 1.5rem;
            }

            [data-theme="dark"] .main-content .stat-icon:hover,
            [data-theme="dark"] .main-content .quick-action-btn:hover i,
            [data-theme="dark"] .main-content .widget-icon:hover i,
            [data-theme="dark"] .main-content .notification-icon:hover i,
            [data-theme="dark"] .main-content .chart-icon:hover i,
            [data-theme="dark"] .main-content .mobile-app-icon:hover i,
            [data-theme="dark"] .main-content .ai-prediction-card:hover i,
            [data-theme="dark"] .main-content .sentiment-analysis-card:hover i,
            [data-theme="dark"] .main-content .leaderboard:hover i,
            [data-theme="dark"] .main-content .achievements:hover i,
            [data-theme="dark"] .main-content .mobile-app-stats .stat-card:hover i {
                background-color: #31393C;
                color: #33A1FD;
                transform: scale(1.1);
            }

            /* Responsive adjustments */
            @media (max-width: 768px) {
                .main-content .stat-icon,
                .main-content .quick-action-btn i,
                .main-content .widget-icon i,
                .main-content .notification-icon i,
                .main-content .chart-icon i,
                .main-content .mobile-app-icon i,
                .main-content .ai-prediction-card i,
                .main-content .sentiment-analysis-card i,
                .main-content .leaderboard i,
                .main-content .achievements i,
                .main-content .mobile-app-stats .stat-card i {
                    width: 50px;
                    height: 50px;
                    font-size: 1.25rem;
                }
            }

            /* Menu and Sub-menu Icon Styles */
            .sidebar .nav-link i,
            .sidebar .sub-menu .nav-link i {
                width: auto;
                height: auto;
                background-color: transparent;
                box-shadow: none;
                margin-right: 0.5rem;
                font-size: 1rem;
                color: #ffffff;
                transition: color 0.3s ease;
            }

            /* Light Mode Menu Icons */
            [data-theme="light"] .sidebar .nav-link i,
            [data-theme="light"] .sidebar .sub-menu .nav-link i {
                color: #000000;
            }

            /* Hover effects */
            .sidebar .nav-link:hover i,
            .sidebar .sub-menu .nav-link:hover i {
                transform: none;
                color: #33A1FD;
            }

            [data-theme="light"] .sidebar .nav-link:hover i,
            [data-theme="light"] .sidebar .sub-menu .nav-link:hover i {
                color: #A52A2A;
            }

            /* Active menu item */
            .sidebar .nav-link.active i,
            .sidebar .sub-menu .nav-link.active i {
                color: #33A1FD;
            }

            [data-theme="light"] .sidebar .nav-link.active i,
            [data-theme="light"] .sidebar .sub-menu .nav-link.active i {
                color: #A52A2A;
            }

            /* Icon Background Colors by Functional Groups */
            /* HR & Employee Management Icons */
            .nav-link i.fa-users,
            .nav-link i.fa-user-plus,
            .nav-link i.fa-user-check {
                background-color: #97dbae; /* Light green for HR related icons */
            }

            /* Time & Attendance Icons */
            .nav-link i.fa-clock,
            .nav-link i.fa-calendar {
                background-color: #ffcdaa; /* Light orange for time related icons */
            }

            /* Performance & KPI Icons */
            .nav-link i.fa-bullseye,
            .nav-link i.fa-chart-line {
                background-color: #f5eb6d; /* Light yellow for performance icons */
            }

            /* Project & Task Icons */
            .nav-link i.fa-project-diagram,
            .nav-link i.fa-tasks {
                background-color: #c6df76; /* Light green for project icons */
            }

            /* Finance & Payroll Icons */
            .nav-link i.fa-money-bill,
            .nav-link i.fa-calculator {
                background-color: #ffe3b3; /* Light beige for finance icons */
            }

            /* Training & Development Icons */
            .nav-link i.fa-graduation-cap,
            .nav-link i.fa-book {
                background-color: #9cb898; /* Muted green for training icons */
            }

            /* System & Settings Icons */
            .nav-link i.fa-cog,
            .nav-link i.fa-tools {
                background-color: #ffcdaa; /* Light orange for system icons */
            }

            /* Dark Mode Adjustments */
            [data-theme="dark"] .nav-link i {
                background-color: #2d2d2d;
                color: #ffffff;
            }

            /* Hover Effects */
            .nav-link:hover i {
                transform: scale(1.1);
                transition: all 0.3s ease;
            }

            /* Responsive Adjustments */
            @media (max-width: 768px) {
                .nav-link i {
                    width: 40px;
                    height: 40px;
                    font-size: 1.25rem;
                }
            }

            /* Main Content Icon Styles */
            .main-content .icon {
                width: 80px;
                height: 80px;
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                transition: transform 0.2s ease;
            }

            /* HR & Employee Management Icons */
            [data-theme="light"] .main-content .icon.fa-users,
            [data-theme="light"] .main-content .icon.fa-user-plus,
            [data-theme="light"] .main-content .icon.fa-user-check {
                background-color: #97dbae;
            }

            /* Time & Attendance Icons */
            [data-theme="light"] .main-content .icon.fa-clock,
            [data-theme="light"] .main-content .icon.fa-calendar {
                background-color: #ffcdaa;
            }

            /* Performance & KPI Icons */
            [data-theme="light"] .main-content .icon.fa-bullseye,
            [data-theme="light"] .main-content .icon.fa-chart-line {
                background-color: #f5eb6d;
            }

            /* Project & Task Icons */
            [data-theme="light"] .main-content .icon.fa-project-diagram,
            [data-theme="light"] .main-content .icon.fa-tasks {
                background-color: #c6df76;
            }

            /* Finance & Payroll Icons */
            [data-theme="light"] .main-content .icon.fa-money-bill,
            [data-theme="light"] .main-content .icon.fa-calculator {
                background-color: #ffe3b3;
            }

            /* Training & Development Icons */
            [data-theme="light"] .main-content .icon.fa-graduation-cap,
            [data-theme="light"] .main-content .icon.fa-book {
                background-color: #9cb898;
            }

            /* System & Settings Icons */
            [data-theme="light"] .main-content .icon.fa-cog,
            [data-theme="light"] .main-content .icon.fa-tools {
                background-color: #ffcdaa;
            }

            /* Dark Mode Icons */
            [data-theme="dark"] .main-content .icon {
                background-color: #2d2d2d;
            }

            [data-theme="dark"] .main-content .icon i {
                color: #ffffff;
            }

            /* Hover Effects */
            .main-content .icon:hover {
                transform: scale(1.1);
            }

            /* Stat Icon Styles in Main Content */
            .main-content .stat-icon {
                width: 60px;
                height: 60px;
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-bottom: 1rem;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
            }

            /* Light Mode Stat Icons */
            [data-theme="light"] .main-content .stat-icon {
                background-color: #97dbae;
            }

            [data-theme="light"] .main-content .stat-icon i {
                color: #ffffff;
                font-size: 1.5rem;
            }

            /* Dark Mode Stat Icons */
            [data-theme="dark"] .main-content .stat-icon {
                background-color: #2d2d2d;
            }

            [data-theme="dark"] .main-content .stat-icon i {
                color: #ffffff;
                font-size: 1.5rem;
            }

            /* Hover Effects for Stat Icons */
            .main-content .stat-icon:hover {
                transform: scale(1.1);
            }

            /* Responsive Adjustments */
            @media (max-width: 768px) {
                .main-content .icon {
                    width: 60px;
                    height: 60px;
                }
                
                .main-content .stat-icon {
                    width: 50px;
                    height: 50px;
                }
                
                .main-content .stat-icon i {
                    font-size: 1.25rem;
                }
            }
            
            [data-theme="dark"] .menu-search input,
[data-theme="dark"] .header .form-control {
    background-color: #2d2d2d !important;
    color: #fff !important;
    border-color: #404040 !important;
}

[data-theme="dark"] .menu-search input::placeholder,
[data-theme="dark"] .header .form-control::placeholder {
    color: #ccc !important;
}

            /* Statistics Cards Styling */
            .stats-container {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                padding: 20px;
            }

            .stat-value {
                font-size: 1.25rem;
                font-weight: 600;
                color: var(--primary-color);
                margin-bottom: 0.25rem;
            }

            .stat-label {
                font-size: 0.75rem;
                color: var(--text-muted);
                margin-bottom: 0.25rem;
            }

            .stat-percentage {
                font-size: 0.7rem;
                padding: 0.15rem 0.35rem;
                border-radius: 4px;
                display: inline-block;
                margin-top: auto;
            }

            .stat-percentage.positive {
                background-color: rgba(40, 167, 69, 0.1);
                color: #28a745;
            }

            .stat-percentage.negative {
                background-color: rgba(220, 53, 69, 0.1);
                color: #dc3545;
            }

            /* Dark theme adjustments */
            [data-theme="dark"] .stat-card {
                background: var(--dark-card-bg);
                border: 1px solid var(--dark-border);
            }

            [data-theme="dark"] .stat-value {
                color: var(--dark-primary);
            }

            [data-theme="dark"] .stat-label {
                color: var(--dark-text-muted);
            }

            /* Responsive adjustments */
            @media (max-width: 768px) {
                .stat-cards {
                    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                    gap: 0.5rem;
                }
                
                .stat-card {
                    padding: 0.5rem;
                    min-height: 70px;
                }
                
                .stat-value {
                    font-size: 1.1rem;
                }
                
                .stat-label {
                    font-size: 0.7rem;
                }
                
                .stat-percentage {
                    font-size: 0.65rem;
                    padding: 0.1rem 0.3rem;
                }
            }

            @media (max-width: 576px) {
                .stat-cards {
                    grid-template-columns: repeat(2, 1fr);
                }
            }
            [data-theme="dark"] .sidebar .nav-link,
            [data-theme="dark"] .sidebar .nav-link span {
            color: #fff !important;
            }
            @media (max-width: 576px) {
    .header {
        flex-direction: column;
        align-items: flex-start;
        padding: 0.5rem 0.5rem;
        gap: 0.5rem;
    }
    .header-left {
        width: 100%;
        text-align: left;
    }
    .header-left h1 {
        font-size: 1rem;
        white-space: normal;
        word-break: break-word;
    }
    .header-right {
        width: 100%;
        display: flex;
        justify-content: flex-end;
    }
    .header-controls {
        flex-wrap: wrap;
        width: 100%;
        gap: 0.25rem;
    }
    .header-controls .form-control {
        width: 100%;
        min-width: 0;
        margin-bottom: 0.5rem;
    }
    .dropdown {
        width: 100%;
    }
}
        </style>

        <script>
            function logout() {
                window.location.href =
                    "/QLNhanSu_version1/public/login_new.html";
            }

            // Menu and Submenu Handling
            document.addEventListener("DOMContentLoaded", function () {
                const menuItems = document.querySelectorAll(
                    ".nav-item.has-submenu"
                );

                menuItems.forEach((item) => {
                    const link = item.querySelector(".nav-link");
                    const submenu = item.querySelector(".submenu");
                    const chevron = item.querySelector(".fa-chevron-right");

                    // Handle click events
                    link.addEventListener("click", function (e) {
                        e.preventDefault();

                        // Close other open submenus
                        menuItems.forEach((otherItem) => {
                            if (otherItem !== item) {
                                otherItem.classList.remove("open");
                                const otherChevron =
                                    otherItem.querySelector(
                                        ".fa-chevron-right"
                                    );
                                if (otherChevron) {
                                    otherChevron.style.transform =
                                        "rotate(0deg)";
                                }
                            }
                        });

                        // Toggle current submenu
                        item.classList.toggle("open");
                        if (chevron) {
                            chevron.style.transform = item.classList.contains(
                                "open"
                            )
                                ? "rotate(90deg)"
                                : "rotate(0deg)";
                        }
                    });

                    // Handle hover events for desktop
                    if (window.innerWidth > 768) {
                        item.addEventListener("mouseenter", function () {
                            item.classList.add("open");
                            if (chevron) {
                                chevron.style.transform = "rotate(90deg)";
                            }
                        });

                        item.addEventListener("mouseleave", function () {
                            item.classList.remove("open");
                            if (chevron) {
                                chevron.style.transform = "rotate(0deg)";
                            }
                        });
                    }
                });

                // Handle window resize
                window.addEventListener("resize", function () {
                    const isMobile = window.innerWidth <= 768;
                    menuItems.forEach((item) => {
                        const chevron = item.querySelector(".fa-chevron-right");
                        if (isMobile) {
                            item.classList.remove("open");
                            if (chevron) {
                                chevron.style.transform = "rotate(0deg)";
                            }
                        }
                    });
                });
            });
        </script>

        <!-- Theme Toggle Script -->
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const themeToggle = document.getElementById('themeToggle');
                const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
                
                // Check for saved theme preference or system preference
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme) {
                    document.documentElement.setAttribute('data-theme', savedTheme);
                    themeToggle.classList.toggle('dark-mode', savedTheme === 'dark');
                } else if (prefersDarkScheme.matches) {
                    document.documentElement.setAttribute('data-theme', 'dark');
                    themeToggle.classList.add('dark-mode');
                }

                // Toggle theme function
                function toggleTheme() {
                    const currentTheme = document.documentElement.getAttribute('data-theme');
                    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                    
                    // Smooth transition for theme change
                    document.documentElement.classList.add('theme-transition');
                    document.documentElement.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                    
                    // Toggle the switch appearance
                    themeToggle.classList.toggle('dark-mode');
                    
                    // Remove transition class
                    setTimeout(() => {
                        document.documentElement.classList.remove('theme-transition');
                    }, 500);
                }

                // Event listeners
                themeToggle.addEventListener('click', toggleTheme);
                themeToggle.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        toggleTheme();
                    }
                });

                // Listen for system theme changes
                prefersDarkScheme.addEventListener('change', (e) => {
                    if (!localStorage.getItem('theme')) {
                        const newTheme = e.matches ? 'dark' : 'light';
                        document.documentElement.setAttribute('data-theme', newTheme);
                        themeToggle.classList.toggle('dark-mode', e.matches);
                    }
                });
            });
        </script>
        
    </head>
    <body>
        <!-- Add notification container -->
        <div class="notification-container" id="notificationContainer"></div>

        <!-- Add loading overlay -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="text-center">
                <div class="loading-spinner"></div>
                <div class="loading-text">Đang tải dữ liệu...</div>
            </div>
        </div>

        <button class="menu-toggle" id="menuToggle">
            <i class="fas fa-bars"></i>
        </button>
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <div class="dashboard-container">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <img src="male.png" alt="User Avatar" class="user-avatar" />
                    <h2 style="color: #3498db;">VNPT</h2>
                </div>

                <!-- Menu Search -->
                <div class="menu-search">
                    <input type="text" placeholder="Tìm kiếm menu..." />
                </div>

                <nav>
                    <ul class="nav-menu">
                        <li class="nav-item" data-menu-id="dashboard">
                            <a href="dashboard.html" class="nav-link active">
                                <span>Dashboard</span>
                            </a>
                        </li>
                        <li class="nav-item has-submenu" data-menu-id="employees">
                            <a href="#" class="nav-link">
                                <span>Nhân viên</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="employees/list.html" class="nav-link">
                                        <span>Danh sách nhân viên</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="employees/add.html" class="nav-link">
                                        <span>Thêm nhân viên</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="employees/contracts.html" class="nav-link">
                                        <span>Hợp đồng</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="employees/attendance.html" class="nav-link">
                                        <span>Chấm công</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Lương</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="salary/list.html" class="nav-link">
                                        <span>Danh sách lương</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="salary/adjust.html" class="nav-link">
                                        <span>Điều chỉnh lương</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="salary/payslip.html" class="nav-link">
                                        <span>Phiếu lương</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="salary/history.html" class="nav-link">
                                        <span>Lịch sử điều chỉnh</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Nghỉ phép</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="leave/register.html" class="nav-link">
                                        <span>Đăng ký nghỉ phép</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="leave/list.html" class="nav-link">
                                        <span>Danh sách nghỉ phép</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Hiệu suất</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="performance/report.html" class="nav-link">
                                        <span>Báo cáo hiệu suất</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="performance/evaluation.html" class="nav-link">
                                        <span>Đánh giá nhân viên</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Phòng ban</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="departments/list.html" class="nav-link">
                                        <span>Danh sách phòng ban</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="positions/list.html" class="nav-link">
                                        <span>Vị trí công việc</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Tài liệu</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="documents/list.html" class="nav-link">
                                        <span>Danh sách tài liệu</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="documents/upload.html" class="nav-link">
                                        <span>Upload tài liệu</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="documents/manage.html" class="nav-link">
                                        <span>Quản lý tài liệu</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="documents/view_document.html" class="nav-link">
                                        <span>Xem tài liệu</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Thiết bị</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="equipment/list.html" class="nav-link">
                                        <span>Danh sách thiết bị</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="equipment/assign.html" class="nav-link">
                                        <span>Cấp phát thiết bị</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Báo cáo</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="reports/employee.html" class="nav-link">
                                        <span>Đánh giá hiệu suất</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Tuyển dụng</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="recruitment/positions.html" class="nav-link">
                                        <span>Vị trí tuyển dụng</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="recruitment/candidates.html" class="nav-link">
                                        <span>Quản lý ứng viên</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="recruitment/interviews.html" class="nav-link">
                                        <span>Lịch phỏng vấn</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="recruitment/onboarding.html" class="nav-link">
                                        <span>Onboarding</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Phúc lợi</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="benefits/insurance.html" class="nav-link">
                                        <span>Bảo hiểm</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="benefits/policies.html" class="nav-link">
                                        <span>Chính sách phúc lợi</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Dự án</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="projects/list.html" class="nav-link">
                                        <span>Danh sách dự án</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="projects/tasks.html" class="nav-link">
                                        <span>Quản lý công việc</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Cài đặt</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="settings/security.html" class="nav-link">
                                        <span>Bảo mật</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="settings/integrations.html" class="nav-link">
                                        <span>Tích hợp</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="settings/backup.html" class="nav-link">
                                        <span>Sao lưu</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a href="#" class="nav-link">
                                <span>Đào tạo</span>
                                <i class="fas fa-chevron-right"></i>
                            </a>
                            <ul class="submenu">
                                <li>
                                    <a href="training/courses.html" class="nav-link">
                                        <span>Quản lý khóa đào tạo</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="training/register.html" class="nav-link">
                                        <span>Đăng ký đào tạo</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="training/list.html" class="nav-link">
                                        <span>Danh sách đăng ký</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="training/evaluation.html" class="nav-link">
                                        <span>Đánh giá kết quả</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="training/reports.html" class="nav-link">
                                        <span>Báo cáo đào tạo</span>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" id="logoutBtn">
                                <span>Đăng xuất</span>
                            </a>
                        </li>
                    </ul>
                </nav>

                <!-- Recent Menu -->
                <div class="recent-menu">
                    <h3>Menu gần đây</h3>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Improved Header -->
                <header class="header">
                    <div class="header-left">
                        <h1 style="color: #F8D800;">Admin Dashboard</h1>
                    </div>
                    <div class="header-right">
                        <div class="header-controls">
                            <input type="text" class="form-control" placeholder="Search..." />
                            <div class="theme-toggle-wrapper">
                                <div class="theme-toggle" id="themeToggle" role="button" tabindex="0">
                                    <div class="sun">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <circle cx="12" cy="12" r="5"/>
                                            <line x1="12" y1="1" x2="12" y2="3"/>
                                            <line x1="12" y1="21" x2="12" y2="23"/>
                                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                                            <line x1="1" y1="12" x2="3" y2="12"/>
                                            <line x1="21" y1="12" x2="23" y2="12"/>
                                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                                        </svg>
                                    </div>
                                    <div class="moon">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                    <i class="fas fa-user-circle"></i> Admin
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#">Profile</a></li>
                                    <li><a class="dropdown-item" href="#">Settings</a></li>
                                    <li><a class="dropdown-item" href="#" id="logoutBtn">Logout</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </header>

               

                <!-- Add quick actions panel -->
                <div class="quick-actions-panel">
                    <h3>Quick Actions</h3>
                    <div class="quick-actions-grid">
                        <button class="quick-action-btn" onclick="window.location.href='employees/add.html'">
                            <i class="fas fa-user-plus"></i>
                            <span>Thêm nhân viên</span>
                        </button>
                        <button class="quick-action-btn" onclick="window.location.href='attendance/check.html'">
                            <i class="fas fa-clock"></i>
                            <span>Chấm công</span>
                        </button>
                        <button class="quick-action-btn" onclick="window.location.href='leave/register.html'">
                            <i class="fas fa-calendar-alt"></i>
                            <span>Đăng ký nghỉ phép</span>
                        </button>
                        <button class="quick-action-btn" onclick="window.location.href='salary/calculate.html'">
                            <i class="fas fa-calculator"></i>
                            <span>Tính lương</span>
                        </button>
                    </div>
                </div>

                <!-- Priority Metrics Grid -->
                <section class="metrics-grid">
                    <div class="row g-3">
                        <!-- Priority 1 Metrics -->
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-1 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" id="totalEmployees">
                                        0
                                    </div>
                                    <div class="stat-label">Tổng nhân viên</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-1 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-bullseye"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" id="kpiCompletion">
                                        0%
                                    </div>
                                    <div class="stat-label">Hoàn thành KPI</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-1 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-user-plus"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" id="newCandidates">
                                        0
                                    </div>
                                    <div class="stat-label">Ứng viên mới</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-1 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-project-diagram"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" id="activeProjects">
                                        0
                                    </div>
                                    <div class="stat-label">
                                        Dự án đang chạy
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-1 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-user-check"></i>
                                </div>
                                <div class="stat-content">
                                    <div
                                        class="stat-value"
                                        id="activeEmployees"
                                    >
                                        0
                                    </div>
                                    <div class="stat-label">
                                        Nhân viên đang hoạt động
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-1 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="stat-content">
                                    <div
                                        class="stat-value"
                                        id="todayAttendance"
                                    >
                                        0%
                                    </div>
                                    <div class="stat-label">
                                        Tỷ lệ chấm công hôm nay
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Priority 2 Metrics -->
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-2 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" id="pendingLeaves">
                                        0
                                    </div>
                                    <div class="stat-label">
                                        Đơn xin nghỉ phép chờ duyệt
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-2 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-money-bill-wave"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-value" id="totalSalary">
                                        0
                                    </div>
                                    <div class="stat-label">
                                        Tổng quỹ lương tháng
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
                            <div style="box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;" class="metric-card priority-2 h-100">
                                <div class="stat-icon">
                                    <i class="fas fa-user-times"></i>
                                </div>
                                <div class="stat-content">
                                    <div
                                        class="stat-value"
                                        id="inactiveEmployees"
                                    >
                                        0
                                    </div>
                                    <div class="stat-label">
                                        Nhân viên không hoạt động
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Add notification center -->
                <div class="notification-center">
                    <div class="notification-header">
                        <h3>Thông báo</h3>
                        <button class="btn btn-sm btn-primary" onclick="markAllAsRead()">Đánh dấu đã đọc</button>
                    </div>
                    <div class="notification-list" id="notificationList">
                        <!-- Notifications will be loaded dynamically -->
                    </div>
                </div>

                <!-- Add calendar widget -->
                <div class="calendar-widget">
                    <div class="calendar-header">
                        <h3>Lịch làm việc</h3>
                        <div class="calendar-controls">
                            <button class="btn btn-sm" onclick="prevMonth()"><i class="fas fa-chevron-left"></i></button>
                            <span id="currentMonth">Tháng 1, 2024</span>
                            <button class="btn btn-sm" onclick="nextMonth()"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                    <div class="calendar-body" id="calendarBody">
                        <!-- Calendar will be loaded dynamically -->
                    </div>
                </div>

                <!-- Add task list widget -->
                <div class="task-list-widget">
                    <div class="task-list-header">
                        <h3>Công việc</h3>
                        <button class="btn btn-sm btn-primary" onclick="addTask()">Thêm công việc</button>
                    </div>
                    <div class="task-list" id="taskList">
                        <!-- Tasks will be loaded dynamically -->
                    </div>
                </div>

                <!-- Add weather widget -->
                <div class="weather-widget">
                    <div class="weather-header">
                        <h3>Thời tiết</h3>
                        <div class="weather-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <span id="weatherLocation">Hà Nội</span>
                        </div>
                    </div>
                    <div class="weather-content" id="weatherContent">
                        <!-- Weather data will be loaded dynamically -->
                    </div>
                </div>

                <!-- Add chat widget -->
                <div class="chat-widget">
                    <div class="chat-header">
                        <h3>Team Chat</h3>
                        <button class="btn btn-sm btn-primary" onclick="newChat()">Cuộc trò chuyện mới</button>
                    </div>
                    <div class="chat-list" id="chatList">
                        <!-- Chat list will be loaded dynamically -->
                    </div>
                </div>

                <!-- Add backup widget -->
                <div class="backup-widget">
                    <div class="backup-header">
                        <h3>Sao lưu dữ liệu</h3>
                        <button class="btn btn-sm btn-primary" onclick="backupData()">Sao lưu ngay</button>
                    </div>
                    <div class="backup-info">
                        <p>Lần sao lưu cuối: <span id="lastBackup">Chưa có</span></p>
                        <p>Kích thước: <span id="backupSize">0 MB</span></p>
                    </div>
                </div>

                <section class="data-tabs">
                    <div class="tab-content" id="recentTabsContent">
                        <div
                            class="tab-pane fade show active"
                            id="employees"
                            role="tabpanel"
                        >
                            <div style="margin-top: 30px;" class="data-section">
                                <div class="section-header">
                                    <h3 class="section-title">Nhân viên mới</h3>
                                    <div class="action-buttons">
                                        <button
                                            class="btn btn-primary"
                                            onclick="window.location.href='./employees/list.html'"
                                        >
                                            Xem tất cả
                                        </button>
                                    </div>
                                </div>
                                <div class="table-responsive">
                                    <table class="admin-table">
                                        <thead>
                                            <tr>
                                                <th>Mã NV</th>
                                                <th>Họ tên</th>
                                                <th>Chức vụ</th>
                                                <th>Phòng ban</th>
                                                <th>Ngày vào làm</th>
                                                <th>Ngày sinh</th>
                                                <th>SĐT</th>
                                                <th>Email</th>
                                                <th>Địa chỉ</th>
                                                <th>Trạng thái</th>
                                                <th>Thao tác</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recentEmployees">
                                            <!-- Data will be loaded dynamically -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div
                            class="tab-pane fade"
                            id="activities"
                            role="tabpanel"
                        >
                            <div class="data-section">
                                <div class="section-header">
                                    <h3 class="section-title">
                                        Hoạt động gần đây
                                    </h3>
                                    <div class="activity-filter">
                                        <select
                                            id="activityType"
                                            class="form-select"
                                        >
                                            <option value="all">
                                                Tất cả hoạt động
                                            </option>
                                            <option value="login">
                                                Đăng nhập
                                            </option>
                                            <option value="edit">
                                                Chỉnh sửa
                                            </option>
                                            <option value="view">
                                                Xem thông tin
                                            </option>
                                            <option value="delete">Xóa</option>
                                        </select>
                                        <input
                                            type="date"
                                            id="activityDate"
                                            class="form-control"
                                        />
                                        <input
                                            type="text"
                                            class="form-control"
                                            placeholder="Tìm kiếm người dùng..."
                                        />
                                    </div>
                                </div>
                                <div id="recentActivities">
                                    <!-- Data will be loaded dynamically -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- Charts Section -->
                <section class="charts-section">
                    <div class="row g-3">
                        <div class="col-12 col-lg-8">
                            <div class="data-section main-chart h-100">
                                <div class="section-header">
                                    <h3 class="section-title">
                                        Xu hướng chấm công
                                    </h3>
                                    <div class="chart-controls">
                                        <select
                                            class="form-select"
                                            id="attendancePeriod"
                                        >
                                            <option value="week">Tuần</option>
                                            <option value="month">Tháng</option>
                                            <option value="quarter">Quý</option>
                                        </select>
                                        <button
                                            class="btn"
                                            onclick="ExportUtils.exportChart('attendanceChart')"
                                        >
                                            <i class="fas fa-download"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="chart-container">
                                    <canvas id="attendanceChart"></canvas>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 col-lg-4">
                            <div class="data-section h-100">
                                <div class="section-header">
                                    <h3 class="section-title">
                                        Phân bố nhân viên theo phòng ban
                                    </h3>
                                    <div class="chart-controls">
                                        <button
                                            class="btn"
                                            onclick="ExportUtils.exportChart('departmentChart')"
                                        >
                                            <i class="fas fa-download"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="chart-container">
                                    <canvas id="departmentChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Tabs Section -->

                <!-- Collapsible Sections -->
                <section class="additional-sections">
                    <div class="accordion" id="additionalSectionsAccordion">
                        <!-- AI Predictions Section -->
                        <div style="margin-top: 30px;" class="accordion-item">
                            <h2 class="accordion-header" id="aiSectionHeader">
                                <button
                                    class="accordion-button"
                                    type="button"
                                    data-bs-toggle="collapse"
                                    data-bs-target="#aiSection"
                                >
                                    Dự đoán và Phân tích
                                </button>
                            </h2>
                            <div
                                id="aiSection"
                                class="accordion-collapse collapse show"
                            >
                                <div class="accordion-body">
                                    <div class="data-section">
                                        <div class="section-header">
                                            <h3 class="section-title">
                                                Dự đoán và Phân tích
                                            </h3>
                                        </div>
                                        <div style="margin-top: 30px;" class="ai-prediction-card">
                                            <h4>Dự đoán xu hướng nhân sự</h4>
                                            <div id="hrTrends"></div>
                                        </div>
                                        <div style="margin-top: 30px;" class="ai-prediction-card">
                                            <h4>Phân tích tâm lý nhân viên</h4>
                                            <div id="sentimentAnalysis"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Gamification Section -->
                        <div class="accordion-item">
                            <h2
                                class="accordion-header"
                                id="gamificationSectionHeader"
                            >
                                <button
                                    class="accordion-button collapsed"
                                    type="button"
                                    data-bs-toggle="collapse"
                                    data-bs-target="#gamificationSection"
                                >
                                    Gamification
                                </button>
                            </h2>
                            <div
                                id="gamificationSection"
                                class="accordion-collapse collapse"
                            >
                                <div class="accordion-body">
                                    <div class="data-section">
                                        <div class="section-header">
                                            <h3 class="section-title">
                                                Gamification
                                            </h3>
                                        </div>
                                        <div class="leaderboard">
                                            <h4>Bảng xếp hạng</h4>
                                            <div id="employeeRankings"></div>
                                        </div>
                                        <div class="achievements">
                                            <h4>Thành tích</h4>
                                            <div
                                                id="employeeAchievements"
                                            ></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Thêm section mới cho AI & Analytics -->
                <section class="ai-analytics-section">
                    <div class="row">
                        <div class="col-lg-6 mb-4">
                            <div class="data-section">
                                <div style="margin-top: 20px;" class="section-header">
                                    <h3 class="section-title">
                                        Dự đoán xu hướng nhân sự
                                    </h3>
                                </div>
                                <div style="margin-top: 20px;" class="ai-prediction-card">
                                    <div class="prediction-chart">
                                        <canvas id="hrTrendsChart"></canvas>
                                    </div>
                                    <div class="prediction-insights">
                                        <h4>Phân tích</h4>
                                        <ul id="hrTrendsInsights"></ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 mb-4">
                            <div class="data-section">
                                <div class="section-header">
                                    <h3 class="section-title">
                                        Phân tích tâm lý nhân viên
                                    </h3>
                                </div>
                                <div class="sentiment-analysis-card">
                                    <div class="sentiment-chart">
                                        <canvas id="sentimentChart"></canvas>
                                    </div>
                                    <div class="sentiment-insights">
                                        <h4>Đề xuất</h4>
                                        <ul id="sentimentInsights"></ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Thêm section mới cho Gamification -->
                <section class="gamification-section">
                    <div class="row">
                        <div class="col-lg-8 mb-4">
                            <div class="data-section">
                                <div class="section-header">
                                    <h3 class="section-title">Bảng xếp hạng</h3>
                                </div>
                                <div class="leaderboard">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Hạng</th>
                                                <th>Nhân viên</th>
                                                <th>Điểm</th>
                                                <th>Thành tích</th>
                                            </tr>
                                        </thead>
                                        <tbody id="leaderboardTable">
                                            <!-- Data will be dynamically loaded -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 mb-4">
                            <div class="data-section">
                                <div class="section-header">
                                    <h3 class="section-title">
                                        Thành tích gần đây
                                    </h3>
                                </div>
                                <div id="recentAchievements">
                                    <!-- Data will be dynamically loaded -->
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Thêm section mới cho Mobile App -->
                <section class="mobile-app-section">
                    <div class="row">
                        <div class="col-12">
                            <div class="data-section">
                                <div class="section-header">
                                    <h3 class="section-title">
                                        Ứng dụng di động
                                    </h3>
                                </div>
                                <div class="mobile-app-stats">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="stat-card">
                                                <i
                                                    class="fas fa-mobile-alt"
                                                ></i>
                                                <h4>Lượt tải</h4>
                                                <p id="appDownloads">0</p>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="stat-card">
                                                <i
                                                    class="fas fa-user-check"
                                                ></i>
                                                <h4>Người dùng hoạt động</h4>
                                                <p id="activeUsers">0</p>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="stat-card">
                                                <i class="fas fa-bell"></i>
                                                <h4>Thông báo đã gửi</h4>
                                                <p id="notificationsSent">0</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <footer class="footer">
                    <p>&copy; 2023 VNPT. All rights reserved.</p>
                </footer>
            </main>
        </div>

        <script>
            // Add functionality for new components
            // Notification center functionality
            function toggleNotificationCenter() {
                document.querySelector('.notification-center').classList.toggle('active');
            }

            function markAllAsRead() {
                // Implementation for marking all notifications as read
            }

            // Calendar functionality
            function prevMonth() {
                // Implementation for previous month
            }

            function nextMonth() {
                // Implementation for next month
            }

            // Add event listeners
            document.addEventListener('DOMContentLoaded', function() {
                // Initialize notification center
                const notificationBtn = document.querySelector('.notification-btn');
                if (notificationBtn) {
                    notificationBtn.addEventListener('click', toggleNotificationCenter);
                }

                // Initialize calendar
                updateCalendar();
            });

            function updateCalendar() {
                // Implementation for updating calendar
            }

            // Task list functionality
            function addTask() {
                // Implementation for adding new task
            }

            function loadTasks() {
                // Implementation for loading tasks
            }

            // Weather widget functionality
            function updateWeather() {
                // Implementation for updating weather data
            }

            // Chat functionality
            function newChat() {
                // Implementation for starting new chat
            }

            function loadChats() {
                // Implementation for loading chats
            }

            // Backup functionality
            function backupData() {
                // Implementation for data backup
            }

            function loadBackupInfo() {
                // Implementation for loading backup information
            }

            // Add event listeners
            document.addEventListener('DOMContentLoaded', function() {
                // Initialize task list
                loadTasks();

                // Initialize weather widget
                updateWeather();

                // Initialize chat
                loadChats();

                // Initialize backup info
                loadBackupInfo();
            });
        </script>
                <script src="js/modules/menu-search.js"></script>
                <script src="js/modules/recent-menu.js"></script>
                <script src="js/modules/global-search.js"></script>
                <script src="js/modules/user-profile.js"></script>
                <script src="js/modules/export-data.js"></script>
                <script src="js/modules/ai-analysis.js"></script>
                <script src="js/modules/gamification.js"></script>
                <script src="js/modules/mobile-stats.js"></script>
                <script src="js/modules/activity-filter.js"></script>
                <script src="js/modules/notification-handler.js"></script>
                <script src="js/modules/loading-overlay.js"></script>
                <script src="js/modules/dark-mode.js"></script>
    </body>

</html>
